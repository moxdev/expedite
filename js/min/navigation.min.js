"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function _arrayWithoutHoles(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}Array.from||(Array.from=function(){var e=Object.prototype.toString,l=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},i=Math.pow(2,53)-1,c=function(t){var e,n=(e=Number(t),isNaN(e)?0:0!==e&&isFinite(e)?(0<e?1:-1)*Math.floor(Math.abs(e)):e);return Math.min(Math.max(n,0),i)};return function(t){var e=Object(t);if(null==t)throw new TypeError("Array.from requires an array-like object - not null or undefined");var n,i=1<arguments.length?arguments[1]:void 0;if(void 0!==i){if(!l(i))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(n=arguments[2])}for(var r,a=c(e.length),o=l(this)?Object(new this(a)):new Array(a),s=0;s<a;)r=e[s],o[s]=i?void 0===n?i(r,s):i.call(n,r,s):r,s+=1;return o.length=a,o}}()),function(){var t=document.querySelector(".menu-toggle"),e=document.querySelector("#mobile-nav-overlay");function n(){var t=this;0==this.nextElementSibling.style.maxHeight?(this.setAttribute("aria-expanded",!0),this.nextElementSibling.classList.add("open"),setTimeout(function(){t.nextElementSibling.style.maxHeight="100vh"},100)):(this.setAttribute("aria-expanded",!1),this.nextElementSibling.style.maxHeight=this.nextElementSibling.style.maxHeight=null,setTimeout(function(){t.nextElementSibling.classList.remove("open")},275)),this.classList.toggle("active")}t.addEventListener("click",function(){this.classList.contains("active")?(this.setAttribute("aria-expanded","false"),e.classList.remove("open"),setTimeout(function(){e.classList.remove("active")},375)):(this.setAttribute("aria-expanded","true"),e.classList.add("active"),setTimeout(function(){e.classList.add("open")},50)),this.classList.toggle("active")}),_toConsumableArray(document.querySelectorAll(".toggle-sub-menu")).forEach(function(t){t.addEventListener("click",n)});var i=_toConsumableArray(document.querySelectorAll(".desktop-main-navigation li")),r=_toConsumableArray(document.querySelectorAll(".desktop-main-navigation a"));r.forEach(function(e){e.addEventListener("focus",function(){var t=function(t){for(var e=[];t&&!t.classList.contains("desktop-main-navigation");t=t.parentNode)e.unshift(t);return e}(e);i.forEach(function(t){t.classList.remove("focus")}),t[t.length-2].classList.contains("menu-item-has-children")&&e.parentElement.classList.add("focus"),t[t.length-3].classList.contains("sub-menu")&&t.forEach(function(t){"li"===t.localName&&t.classList.add("focus")})}),e.addEventListener("focusout",function(){i.forEach(function(t){t.classList.remove("focus")})})})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5hdmlnYXRpb24uanMiXSwibmFtZXMiOlsiQXJyYXkiLCJmcm9tIiwidG9TdHIiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImlzQ2FsbGFibGUiLCJmbiIsImNhbGwiLCJtYXhTYWZlSW50ZWdlciIsIk1hdGgiLCJwb3ciLCJ0b0xlbmd0aCIsInZhbHVlIiwibnVtYmVyIiwibGVuIiwiTnVtYmVyIiwiaXNOYU4iLCJpc0Zpbml0ZSIsImZsb29yIiwiYWJzIiwibWluIiwibWF4IiwiYXJyYXlMaWtlIiwiaXRlbXMiLCJUeXBlRXJyb3IiLCJUIiwibWFwRm4iLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJrVmFsdWUiLCJBIiwidGhpcyIsImsiLCJtb2JpbGVUb2dnbGUiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJwYW5lbCIsInRvZ2dsZVN1Yk1lbnUiLCJfdGhpcyIsIm5leHRFbGVtZW50U2libGluZyIsInN0eWxlIiwibWF4SGVpZ2h0Iiwic2V0QXR0cmlidXRlIiwiY2xhc3NMaXN0IiwiYWRkIiwic2V0VGltZW91dCIsInJlbW92ZSIsInRvZ2dsZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJjb250YWlucyIsIl90b0NvbnN1bWFibGVBcnJheSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZWxlbWVudCIsImxpcyIsImFuY2hvcnMiLCJhbmNob3IiLCJwYXJlbnRzIiwiZWxlbSIsInBhcmVudE5vZGUiLCJ1bnNoaWZ0IiwiZ2V0UGFyZW50cyIsImxpIiwicGFyZW50RWxlbWVudCIsInBhcmVudCIsImxvY2FsTmFtZSJdLCJtYXBwaW5ncyI6IjhkQUNPQSxNQUFNQyxPQUNYRCxNQUFNQyxLQUFTLFdBQ2IsSUFBSUMsRUFBUUMsT0FBT0MsVUFBVUMsU0FDekJDLEVBQWEsU0FBVUMsR0FDekIsTUFBTyxtQkFBc0JBLEdBQU0sc0JBQXdCTCxFQUFNTSxLQUFNRCxJQVlyRUUsRUFBaUJDLEtBQUtDLElBQUssRUFBRyxJQUFPLEVBQ3JD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Y3BCLFVBQVVDLElBQUssU0FJakNhLEVBQVFBLEVBQVE3QixPQUFTLEdBQUdlLFVBQVVNLFNBQVUsYUFDbkRRLEVBQVFMLFFBQVMsU0FBQVksR0FDVixPQUFTQSxFQUFPQyxXQUNuQkQsRUFBT3JCLFVBQVVDLElBQUssYUFPOUJZLEVBQU9SLGlCQUFrQixXQUFZLFdBQ25DTSxFQUFJRixRQUFTLFNBQUFVLEdBQ1hBLEVBQUduQixVQUFVRyxPQUFRLGVBbkczQiIsImZpbGUiOiJuYXZpZ2F0aW9uLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8vIEFycmF5LmZyb20oKSBwb2x5ZmlsbFxuaWYgKCAhIEFycmF5LmZyb20gKSB7XG4gIEFycmF5LmZyb20gPSAoIGZ1bmN0aW9uKCkge1xuICAgIHZhciB0b1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG4gICAgdmFyIGlzQ2FsbGFibGUgPSBmdW5jdGlvbiggZm4gKSB7XG4gICAgICByZXR1cm4gJ2Z1bmN0aW9uJyA9PT0gdHlwZW9mIGZuIHx8ICdbb2JqZWN0IEZ1bmN0aW9uXScgPT09IHRvU3RyLmNhbGwoIGZuICk7XG4gICAgfTtcbiAgICB2YXIgdG9JbnRlZ2VyID0gZnVuY3Rpb24oIHZhbHVlICkge1xuICAgICAgdmFyIG51bWJlciA9IE51bWJlciggdmFsdWUgKTtcbiAgICAgIGlmICggaXNOYU4oIG51bWJlciApICkge1xuICAgICAgICByZXR1cm4gMDtcbiAgICAgIH1cbiAgICAgIGlmICggMCA9PT0gbnVtYmVyIHx8ICEgaXNGaW5pdGUoIG51bWJlciApICkge1xuICAgICAgICByZXR1cm4gbnVtYmVyO1xuICAgICAgfVxuICAgICAgcmV0dXJuICggMCA8IG51bWJlciA/IDEgOiAtMSApICogTWF0aC5mbG9vciggTWF0aC5hYnMoIG51bWJlciApICk7XG4gICAgfTtcbiAgICB2YXIgbWF4U2FmZUludGVnZXIgPSBNYXRoLnBvdyggMiwgNTMgKSAtIDE7XG4gICAgdmFyIHRvTGVuZ3RoID0gZnVuY3Rpb24oIHZhbHVlICkge1xuICAgICAgdmFyIGxlbiA9IHRvSW50ZWdlciggdmFsdWUgKTtcbiAgICAgIHJldHVybiBNYXRoLm1pbiggTWF0aC5tYXgoIGxlbiwgMCApLCBtYXhTYWZlSW50ZWdlciApO1xuICAgIH07XG5cbiAgICAvLyBUaGUgbGVuZ3RoIHByb3BlcnR5IG9mIHRoZSBmcm9tIG1ldGhvZCBpcyAxLlxuICAgIHJldHVybiBmdW5jdGlvbiBmcm9tKCBhcnJheUxpa2UgLyosIG1hcEZuLCB0aGlzQXJnICovICkge1xuICAgICAgLy8gMS4gTGV0IEMgYmUgdGhlIHRoaXMgdmFsdWUuXG4gICAgICB2YXIgQyA9IHRoaXM7XG5cbiAgICAgIC8vIDIuIExldCBpdGVtcyBiZSBUb09iamVjdChhcnJheUxpa2UpLlxuICAgICAgdmFyIGl0ZW1zID0gT2JqZWN0KCBhcnJheUxpa2UgKTtcblxuICAgICAgLy8gMy4gUmV0dXJuSWZBYnJ1cHQoaXRlbXMpLlxuICAgICAgaWYgKCBudWxsID09IGFycmF5TGlrZSApIHtcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICAgICAnQXJyYXkuZnJvbSByZXF1aXJlcyBhbiBhcnJheS1saWtlIG9iamVjdCAtIG5vdCBudWxsIG9yIHVuZGVmaW5lZCdcbiAgICAgICAgKTtcbiAgICAgIH1cblxuICAgICAgLy8gNC4gSWYgbWFwZm4gaXMgdW5kZWZpbmVkLCB0aGVuIGxldCBtYXBwaW5nIGJlIGZhbHNlLlxuICAgICAgdmFyIG1hcEZuID0gMSA8IGFyZ3VtZW50cy5sZW5ndGggPyBhcmd1bWVudHNbMV0gOiB2b2lkIHVuZGVmaW5lZDtcbiAgICAgIHZhciBUO1xuICAgICAgaWYgKCAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIG1hcEZuICkge1xuXG4gICAgICAgIC8vIDUuIGVsc2VcbiAgICAgICAgLy8gNS4gYSBJZiBJc0NhbGxhYmxlKG1hcGZuKSBpcyBmYWxzZSwgdGhyb3cgYSBUeXBlRXJyb3IgZXhjZXB0aW9uLlxuICAgICAgICBpZiAoICEgaXNDYWxsYWJsZSggbWFwRm4gKSApIHtcbiAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAgICAgJ0FycmF5LmZyb206IHdoZW4gcHJvdmlkZWQsIHRoZSBzZWNvbmQgYXJndW1lbnQgbXVzdCBiZSBhIGZ1bmN0aW9uJ1xuICAgICAgICAgICk7XG4gICAgICAgIH1cblxuICAgICAgICAvLyA1LiBiLiBJZiB0aGlzQXJnIHdhcyBzdXBwbGllZCwgbGV0IFQgYmUgdGhpc0FyZzsgZWxzZSBsZXQgVCBiZSB1bmRlZmluZWQuXG4gICAgICAgIGlmICggMiA8IGFyZ3VtZW50cy5sZW5ndGggKSB7XG4gICAgICAgICAgVCA9IGFyZ3VtZW50c1syXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyAxMC4gTGV0IGxlblZhbHVlIGJlIEdldChpdGVtcywgXCJsZW5ndGhcIikuXG4gICAgICAvLyAxMS4gTGV0IGxlbiBiZSBUb0xlbmd0aChsZW5WYWx1ZSkuXG4gICAgICB2YXIgbGVuID0gdG9MZW5ndGgoIGl0ZW1zLmxlbmd0aCApO1xuXG4gICAgICAvLyAxMy4gSWYgSXNDb25zdHJ1Y3RvcihDKSBpcyB0cnVlLCB0aGVuXG4gICAgICAvLyAxMy4gYS4gTGV0IEEgYmUgdGhlIHJlc3VsdCBvZiBjYWxsaW5nIHRoZSBbW0NvbnN0cnVjdF1dIGludGVybmFsIG1ldGhvZFxuICAgICAgLy8gb2YgQyB3aXRoIGFuIGFyZ3VtZW50IGxpc3QgY29udGFpbmluZyB0aGUgc2luZ2xlIGl0ZW0gbGVuLlxuICAgICAgLy8gMTQuIGEuIEVsc2UsIExldCBBIGJlIEFycmF5Q3JlYXRlKGxlbikuXG4gICAgICB2YXIgQSA9IGlzQ2FsbGFibGUoIEMgKSA/IE9iamVjdCggbmV3IEMoIGxlbiApICkgOiBuZXcgQXJyYXkoIGxlbiApO1xuXG4gICAgICAvLyAxNi4gTGV0IGsgYmUgMC5cbiAgICAgIHZhciBrID0gMDtcblxuICAgICAgLy8gMTcuIFJlcGVhdCwgd2hpbGUgayA8IGxlbsOi4oKswqYgKGFsc28gc3RlcHMgYSAtIGgpXG4gICAgICB2YXIga1ZhbHVlO1xuICAgICAgd2hpbGUgKCBrIDwgbGVuICkge1xuICAgICAgICBrVmFsdWUgPSBpdGVtc1trXTtcbiAgICAgICAgaWYgKCBtYXBGbiApIHtcbiAgICAgICAgICBBW2tdID1cbiAgICAgICAgICAgICd1bmRlZmluZWQnID09PSB0eXBlb2YgVCA/XG4gICAgICAgICAgICAgIG1hcEZuKCBrVmFsdWUsIGsgKSA6XG4gICAgICAgICAgICAgIG1hcEZuLmNhbGwoIFQsIGtWYWx1ZSwgayApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIEFba10gPSBrVmFsdWU7XG4gICAgICAgIH1cbiAgICAgICAgayArPSAxO1xuICAgICAgfVxuXG4gICAgICAvLyAxOC4gTGV0IHB1dFN0YXR1cyBiZSBQdXQoQSwgXCJsZW5ndGhcIiwgbGVuLCB0cnVlKS5cbiAgICAgIEEubGVuZ3RoID0gbGVuO1xuXG4gICAgICAvLyAyMC4gUmV0dXJuIEEuXG4gICAgICByZXR1cm4gQTtcbiAgICB9O1xuICB9KCkgKTtcbn1cblxuKCBmdW5jdGlvbigpIHtcblxuICAvLyBWYXJpYWJsZXMuIGZvY3VzVHJhcCgpIGlzIGZyb20gdGhlIGZvY3VzIHRyYXAgbGlicmFyeSB0aGF0IGlzIGxvYWRlZCBiZWZvcmUgdGhpcyBzY3RpcHQuXG4gIGNvbnN0IG1vYmlsZVRvZ2dsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcubWVudS10b2dnbGUnICk7XG4gIGNvbnN0IHBhbmVsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvciggJyNtb2JpbGUtbmF2LW92ZXJsYXknICk7XG5cbiAgLy8gY29uc3QgdHJhcCA9IGZvY3VzVHJhcCggcGFuZWwgKTtcblxuICAvLyBjb25zdCBidG5DbG9zZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoICcubWVudS1jbG9zZScgKTtcblxuICBtb2JpbGVUb2dnbGUuYWRkRXZlbnRMaXN0ZW5lciggJ2NsaWNrJywgZnVuY3Rpb24oKSB7XG4gICAgaWYgKCB0aGlzLmNsYXNzTGlzdC5jb250YWlucyggJ2FjdGl2ZScgKSApIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCAnYXJpYS1leHBhbmRlZCcsICdmYWxzZScgKTtcbiAgICAgIHBhbmVsLmNsYXNzTGlzdC5yZW1vdmUoICdvcGVuJyApO1xuICAgICAgc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgICBwYW5lbC5jbGFzc0xpc3QucmVtb3ZlKCAnYWN0aXZlJyApO1xuXG4gICAgICAgIC8vIHRyYXAuZGVhY3RpdmF0ZSgpO1xuICAgICAgfSwgMzc1ICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCAnYXJpYS1leHBhbmRlZCcsICd0cnVlJyApO1xuICAgICAgcGFuZWwuY2xhc3NMaXN0LmFkZCggJ2FjdGl2ZScgKTtcbiAgICAgIHNldFRpbWVvdXQoICgpID0+IHtcbiAgICAgICAgcGFuZWwuY2xhc3NMaXN0LmFkZCggJ29wZW4nICk7XG5cbiAgICAgICAgLy8gdHJhcC5hY3RpdmF0ZSgpO1xuICAgICAgfSwgNTAgKTtcbiAgICB9XG5cbiAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoICdhY3RpdmUnICk7XG4gIH0pO1xuXG4gIC8qKioqKiogVE9HR0xFIFNVQk1FTlVTICoqKioqKi9cbiAgY29uc3QgYXJyb3dzID0gWyAuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCAnLnRvZ2dsZS1zdWItbWVudScgKSBdO1xuICBhcnJvd3MuZm9yRWFjaCggZWxlbWVudCA9PiB7XG4gICAgZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCAnY2xpY2snLCB0b2dnbGVTdWJNZW51ICk7XG4gIH0pO1xuXG4gIGZ1bmN0aW9uIHRvZ2dsZVN1Yk1lbnUoKSB7XG4gICAgaWYgKCAwID09IHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nLnN0eWxlLm1heEhlaWdodCApIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCAnYXJpYS1leHBhbmRlZCcsIHRydWUgKTtcbiAgICAgIHRoaXMubmV4dEVsZW1lbnRTaWJsaW5nLmNsYXNzTGlzdC5hZGQoICdvcGVuJyApO1xuICAgICAgc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgICB0aGlzLm5leHRFbGVtZW50U2libGluZy5zdHlsZS5tYXhIZWlnaHQgPSAnMTAwdmgnO1xuICAgICAgfSwgMTAwICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuc2V0QXR0cmlidXRlKCAnYXJpYS1leHBhbmRlZCcsIGZhbHNlICk7XG4gICAgICB0aGlzLm5leHRFbGVtZW50U2libGluZy5zdHlsZS5tYXhIZWlnaHQgPSB0aGlzLm5leHRFbGVtZW50U2libGluZy5zdHlsZS5tYXhIZWlnaHQgPSBudWxsO1xuICAgICAgc2V0VGltZW91dCggKCkgPT4ge1xuICAgICAgICB0aGlzLm5leHRFbGVtZW50U2libGluZy5jbGFzc0xpc3QucmVtb3ZlKCAnb3BlbicgKTtcbiAgICAgIH0sIDI3NSApO1xuICAgIH1cbiAgICB0aGlzLmNsYXNzTGlzdC50b2dnbGUoICdhY3RpdmUnICk7XG4gIH1cblxuICAvKioqKioqIEExMVkgKioqKioqL1xuICBjb25zdCBsaXMgPSBbIC4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoICcuZGVza3RvcC1tYWluLW5hdmlnYXRpb24gbGknICkgXTtcbiAgY29uc3QgYW5jaG9ycyA9IFsgLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCggJy5kZXNrdG9wLW1haW4tbmF2aWdhdGlvbiBhJyApIF07XG5cbiAgLy8gRnVuY3Rpb24gdGhhdCByZXR1cm5zIGFuIGFycmF5IG9mIGFuIGVsZW1lbnRzIHBhcmVudHMgKHVwIHRvIHRoZSAuZGVza3RvcC1tYWluLW1lbnUgbm9kZSlcbiAgY29uc3QgZ2V0UGFyZW50cyA9IGZ1bmN0aW9uKCBlbGVtICkge1xuICAgIGNvbnN0IHBhcmVudHMgPSBbXTtcbiAgICBmb3IgKCA7IGVsZW07IGVsZW0gPSBlbGVtLnBhcmVudE5vZGUgKSB7XG4gICAgICBpZiAoIGVsZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCAnZGVza3RvcC1tYWluLW5hdmlnYXRpb24nICkgKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgcGFyZW50cy51bnNoaWZ0KCBlbGVtICk7XG4gICAgfVxuICAgIHJldHVybiBwYXJlbnRzO1xuICB9O1xuXG4gIGFuY2hvcnMuZm9yRWFjaCggYW5jaG9yID0+IHtcbiAgICBhbmNob3IuYWRkRXZlbnRMaXN0ZW5lciggJ2ZvY3VzJywgKCkgPT4ge1xuICAgICAgY29uc3QgcGFyZW50cyA9IGdldFBhcmVudHMoIGFuY2hvciApO1xuXG4gICAgICBsaXMuZm9yRWFjaCggbGkgPT4ge1xuICAgICAgICBsaS5jbGFzc0xpc3QucmVtb3ZlKCAnZm9jdXMnICk7XG4gICAgICB9KTtcblxuICAgICAgLy8gSWYgYSBvbmUgbGV2ZWwgZHJvcGRvd24sIGFkZCBhIGZvY3VzIGNsYXNzIHRvIHRoZSBsaVxuICAgICAgaWYgKFxuICAgICAgICBwYXJlbnRzW3BhcmVudHMubGVuZ3RoIC0gMl0uY2xhc3NMaXN0LmNvbnRhaW5zKCAnbWVudS1pdGVtLWhhcy1jaGlsZHJlbicgKVxuICAgICAgKSB7XG4gICAgICAgIGFuY2hvci5wYXJlbnRFbGVtZW50LmNsYXNzTGlzdC5hZGQoICdmb2N1cycgKTtcbiAgICAgIH1cblxuICAgICAgLy8gSWYgYSBtb3JlIHRoYW4gYSBvbmUgbGV2ZWwgZHJvcGRvd24sIGFkZCBhIGZvY3VzIGNsYXNzIGVhY2ggbGkgaW4gdGhlIFwicGFyZW50c1wiIGFycmF5XG4gICAgICBpZiAoIHBhcmVudHNbcGFyZW50cy5sZW5ndGggLSAzXS5jbGFzc0xpc3QuY29udGFpbnMoICdzdWItbWVudScgKSApIHtcbiAgICAgICAgcGFyZW50cy5mb3JFYWNoKCBwYXJlbnQgPT4ge1xuICAgICAgICAgIGlmICggJ2xpJyA9PT0gcGFyZW50LmxvY2FsTmFtZSApIHtcbiAgICAgICAgICAgIHBhcmVudC5jbGFzc0xpc3QuYWRkKCAnZm9jdXMnICk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIC8vIFJlc2V0IGFsbCBsaSdzIHdoZW4gZm9jdXMgaXMgcmVtb3ZlZFxuICAgIGFuY2hvci5hZGRFdmVudExpc3RlbmVyKCAnZm9jdXNvdXQnLCAoKSA9PiB7XG4gICAgICBsaXMuZm9yRWFjaCggbGkgPT4ge1xuICAgICAgICBsaS5jbGFzc0xpc3QucmVtb3ZlKCAnZm9jdXMnICk7XG4gICAgICB9KTtcbiAgICB9KTtcbiAgfSk7XG59KCkgKTtcbiJdfQ==
