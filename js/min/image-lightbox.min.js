"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(t){"object"===("undefined"==typeof module?"undefined":_typeof(module))&&"object"===_typeof(module.exports)?t(require("jquery"),window,document):t(jQuery,window,document)}(function(R,D,z){var _=R("<div/>").attr("class","imagelightbox-loading").append(R("<div/>")),t=R("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-left"}),e=R("<button/>",{type:"button",class:"imagelightbox-arrow imagelightbox-arrow-right"}),X=t.add(e),j=R("<div/>",{class:"imagelightbox-caption",html:"&nbsp;"}),N=R("<button/>",{type:"button",class:"imagelightbox-close"}),U=R("<div/>",{class:"imagelightbox-overlay"}),V=R("<a/>",{href:"#",class:"imagelightbox-navitem"}),K=R("<div/>",{class:"imagelightbox-nav"}),Y=R("<div/>",{class:"imagelightbox-wrapper"}),H=R("body"),o=function(){var t=z.body||z.documentElement;return""===(t=t.style).WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition&&""},W=!1!==o(),$=function(t,e,i){var n={},a=o();n[a+"transform"]="translateX("+e+") translateY(-50%)",n[a+"transition"]=a+"transform "+i+"s ease-in",t.css(n)},B="ontouchstart"in D,Q=D.navigator.pointerEnabled||D.navigator.msPointerEnabled,A=function(t){if(B)return!0;if(!Q||void 0===t||void 0===t.pointerType)return!1;if(void 0!==t.MSPOINTER_TYPE_MOUSE){if(t.MSPOINTER_TYPE_MOUSE!==t.pointerType)return!0}else if("mouse"!==t.pointerType)return!0;return!1},G=!1!=!!(z.fullscreenEnabled||z.webkitFullscreenEnabled||z.mozFullScreenEnabled||z.msFullscreenEnabled),J=!(!D.history||!history.pushState);R.fn.imageLightbox=function(t){var i="",c=R([]),u=R(),s=R([]),r=-1,d=R(),f=0,l=0,g=0,p=!1,n=0,h=R.extend({selector:"a[data-imagelightbox]",id:"imagelightbox",allowedTypes:"png|jpg|jpeg|gif",animationSpeed:250,activity:!1,arrows:!1,button:!1,caption:!1,enableKeyboard:!0,history:!1,fullscreen:!1,gutter:10,offsetY:0,navigation:!1,overlay:!1,preloadNext:!0,quitOnEnd:!1,quitOnImgClick:!1,quitOnDocClick:!0,quitOnEscKey:!0},t),b=function(){h.activity&&S(),h.arrows&&X.css("display","block")},a=function(t,e,i){var n=e+"="+i,a="?"+n;if(t){var o=new RegExp("([?&])"+e+"=[^&]*");a=null!==t.match(o)?t.replace(o,"$1"+n):t+"&"+n}return a},o=function(){if(J&&h.history){var t=c[r].dataset.ilb2Id;t||(t=r);var e={imageLightboxIndex:t},i=c[r].dataset.imagelightbox;i&&(e.imageLightboxSet=i);var n=a(z.location.search,"imageLightboxIndex",t);i&&(n=a(n,"imageLightboxSet",i)),D.history.pushState(e,"",z.location.pathname+n)}},e=function(t,e){var i=t;if(i){var n=new RegExp("[?]"+e+"=[^&]*"),a=new RegExp("&"+e+"=[^&]*");i=(i=i.replace(n,"?")).replace(a,"")}return i},m=function(t){var e=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)").exec(z.location.search);if(e&&e[2])return decodeURIComponent(e[2].replace(/\+/g," "))},v=function(){if(J&&h.history){var t=m("imageLightboxIndex");if(t){var e=c.filter('[data-ilb2-id="'+t+'"]');0<e.length?r=c.index(e):e=R(c[r=t]);var i=m("imageLightboxSet");!e[0]||i&&i!==e[0].dataset.imagelightbox||L(e,!0)}}},x=function(){if(--r<0){if(!0===h.quitOnEnd)return P(),!1;r=c.length-1}u=c.eq(r),o(),Y.trigger("previous.ilb2",u),T(1)},y=function(){if(++r>=c.length){if(!0===h.quitOnEnd)return P(),!1;r=0}o(),u=c.eq(r),Y.trigger("next.ilb2",u),T(-1)},w=function(){Y.append(_)},S=function(){R(".imagelightbox-loading").remove()},E=function(){Y.append(U)},q=function(){N.appendTo(Y).on("click.ilb7",function(){return P(),!1})},I=function(){j.html("&nbsp;"),R(u).data("ilb2-caption")?j.html(R(u).data("ilb2-caption")):0<R(u).find("img").length&&j.html(R(u).find("img").attr("alt"))},k=function(){if(c.length){for(var t=0;t<c.length;t++)K.append(V.clone());var e=K.children("a");e.eq(c.index(u)).addClass("active"),Y.on("previous.ilb2 next.ilb2",function(){e.removeClass("active").eq(c.index(u)).addClass("active")}),Y.append(K),K.on("click.ilb7 touchend.ilb7",function(){return!1}).on("click.ilb7 touchend.ilb7","a",function(){var t=R(this);if(c.eq(t.index()).attr("href")!==R(".imagelightbox").attr("src")){var e=c.eq(t.index());e.length&&(n=c.index(u),u=e,T(t.index()<n?-1:1))}t.addClass("active").siblings().removeClass("active")})}},O=function(){Y.append(X),X.on("click.ilb7 touchend.ilb7",function(t){return t.stopImmediatePropagation(),t.preventDefault(),R(this).hasClass("imagelightbox-arrow-left")?x():y(),!1})},C=function(){if(!d.length)return!0;var t=h.caption?j.outerHeight():0,a=R(D).width(),o=R(D).height()-t,r=Math.abs(1-h.gutter/100);function e(){if(a<f||o<l){var t=a/o<f/l?f/a:l/o;f/=t,l/=t}var e=l*r,i=f*r,n=(R(D).width()-i)/2;d.css({width:i+"px",height:e+"px",left:n+"px"})}if(void 0!==d.get(0).videoWidth)return f=d.get(0).videoWidth,l=d.get(0).videoHeight,void e();var i=new Image;i.src=d.attr("src"),i.onload=function(){f=i.width,l=i.height,e()}},T=function(l){if(p)return!1;if(d.length){var t={opacity:0};W?$(d,100*l-g+"px",h.animationSpeed/1e3):t.left=parseInt(d.css("left"))+100*l+"px",d.animate(t,h.animationSpeed,function(){F()}),g=0}p=!0,h.activity&&w(),h.caption&&I(),setTimeout(function(){var t,e,i=u.attr("href"),n=0,a=0,o=0;function r(){var t={opacity:1};if(d.appendTo(Y),C(),d.css("opacity",0),W)$(d,-100*l+"px",0),setTimeout(function(){$(d,"0px",h.animationSpeed/1e3)},50);else{var e=parseInt(d.css("left"));t.left=e+"px",d.css("left",e-100*l+"px")}if(d.animate(t,h.animationSpeed,function(){p=!1,b()}),h.preloadNext){var i=c.eq(c.index(u)+1);i.length||(i=c.eq(0)),R("<img />").attr("src",i.attr("href"))}Y.trigger("loaded.ilb2")}u.data("ilb2Video")?s.each(function(){this.i===u.data("ilb2VideoId")&&(t=this.l,e=this.e,this.a&&(!1===t&&e.attr("autoplay",this.a),!0===t&&e.get(0).play()))}):e=R("<img id='"+h.id+"' />").attr("src",i),d=e.on("load.ilb7",r).on("error.ilb7",function(){b()}).on(Q?"pointerup.ilb7 MSPointerUp.ilb7":"click.ilb7",function(t){return t.preventDefault(),h.quitOnImgClick?(P(),!1):!!A(t.originalEvent)||void((t.pageX||t.originalEvent.pageX)-t.target.offsetLeft<f/2?x():y())}).on("touchstart.ilb7 pointerdown.ilb7 MSPointerDown.ilb7",function(t){if(!A(t.originalEvent)||h.quitOnImgClick)return!0;W&&(o=parseInt(d.css("left"))),n=t.originalEvent.pageX||t.originalEvent.touches[0].pageX}).on("touchmove.ilb7 pointermove.ilb7 MSPointerMove.ilb7",function(t){if(!Q&&"pointermove"===t.type||!A(t.originalEvent)||h.quitOnImgClick)return!0;t.preventDefault(),a=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,g=n-a,W?$(d,-g+"px",0):d.css("left",o-g+"px")}).on("touchend.ilb7 touchcancel.ilb7 pointerup.ilb7 pointercancel.ilb7 MSPointerUp.ilb7 MSPointerCancel.ilb7",function(t){if(!A(t.originalEvent)||h.quitOnImgClick)return!0;50<Math.abs(g)?g<0?x():y():W?$(d,"0px",h.animationSpeed/1e3):d.animate({left:o+"px"},h.animationSpeed/2)}),!0===t&&r(),!1===t&&(d=d.on("loadedmetadata.ilb7",r))},h.animationSpeed+100)},F=function(){if(!d.length)return!1;d.remove(),d=R()},L=function(t,e){if(p)return!1;p=!1,u=t,r=c.index(u),e||o(),function(){h.arrows&&O(this),h.navigation&&k(),h.overlay&&E(),h.button&&q(),h.caption&&Y.append(j)}(),H.append(Y).addClass("imagelightbox-open"),Y.trigger("start.ilb2",t),T(0)},P=function(t){if(r=-1,t||function(){if(J&&h.history){var t=e(z.location.search,"imageLightboxIndex");t=e(t,"imageLightboxSet"),D.history.pushState({},"",z.location.pathname+t)}}(),Y.trigger("quit.ilb2"),H.removeClass("imagelightbox-open"),!d.length)return!1;d.animate({opacity:0},h.animationSpeed,function(){F(),p=!1,Y.remove().find("*").remove()})},M=function(e){e.each(function(){c=e.add(R(this))}),e.on("click.ilb7",{set:i},function(t){t.preventDefault(),i=R(t.currentTarget).data("imagelightbox"),e.filter(function(){return R(this).data("imagelightbox")===i}).filter(function(){return t=R(this),"a"===R(t).prop("tagName").toLowerCase()&&(new RegExp(".("+h.allowedTypes+")$","i").test(R(t).attr("href"))||R(t).data("ilb2Video"));var t}).each(function(){c=c.add(R(this))}),c.length<1?P():L(R(this))})};return R(D).on("resize.ilb7",C),J&&h.history&&R(D).on("popstate",function(t){var e=t.originalEvent.state;if(e){var i=e.imageLightboxIndex;if(void 0!==i){var n=c.filter('[data-ilb2-id="'+i+'"]');if(0<n.length)var a=c.index(n);else n=R(c[a=i]);if(n[0]&&(!e.imageLightboxSet||e.imageLightboxSet===n[0].dataset.imagelightbox))if(r<0)L(n,!0);else{var o=1;r<a&&(o=-1),u=n,r=a,T(o)}}else P(!0)}else P(!0)}),R(z).ready(function(){h.quitOnDocClick&&R(z).on(B?"touchend.ilb7":"click.ilb7",function(t){d.length&&!R(t.target).is(d)&&(t.preventDefault(),P())}),h.fullscreen&&G&&R(z).on("keydown.ilb7",function(t){if(!d.length)return!0;var e;-1<[9,32,38,40].indexOf(t.which)&&(t.stopPropagation(),t.preventDefault()),-1<[13].indexOf(t.which)&&(t.stopPropagation(),t.preventDefault(),(e=z.getElementById(h.id).parentElement).requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),z.exitFullscreen?z.exitFullscreen():z.mozCancelFullScreen?z.mozCancelFullScreen():z.webkitExitFullscreen&&z.webkitExitFullscreen())}),h.enableKeyboard&&R(z).on("keydown.ilb7",function(t){if(!d.length)return!0;-1<[27].indexOf(t.which)&&h.quitOnEscKey&&(t.stopPropagation(),t.preventDefault(),P()),-1<[37].indexOf(t.which)&&(t.stopPropagation(),t.preventDefault(),x()),-1<[39].indexOf(t.which)&&(t.stopPropagation(),t.preventDefault(),y())})}),R(z).off("click",h.selector),M(R(this)),v(),c.each(function(){var t=R(this).data("ilb2Video");if(t){var e=R(this).data("ilb2Id");e||(e="a"+(65536*(1+Math.random())|0).toString(16)),R(this).data("ilb2VideoId",e);var n={e:R("<video id='"+h.id+"' preload='metadata'>"),i:e,l:!1,a:void 0};R.each(t,function(t,e){"autoplay"===t?n.a=e:"sources"!==t&&(n.e=n.e.attr(t,e))}),t.sources&&R.each(t.sources,function(t,e){var i=R("<source>");R.each(e,function(t,e){i=i.attr(t,e)}),n.e.append(i)}),n.e.on("loadedmetadata.ilb7",function(){n.l=!0}),s=s.add(n)}}),this.addToImageLightbox=function(t){M(t)},this.openHistory=function(){v()},this.loadPreviousImage=function(){x()},this.loadNextImage=function(){y()},this.quitImageLightbox=function(){return P(),this},this.startImageLightbox=function(t){t?t.trigger("click.ilb7"):R(this).trigger("click.ilb7")},this}});
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImltYWdlLWxpZ2h0Ym94LmpzIl0sIm5hbWVzIjpbImZhY3RvcnkiLCJtb2R1bGUiLCJfdHlwZW9mIiwiZXhwb3J0cyIsInJlcXVpcmUiLCJ3aW5kb3ciLCJkb2N1bWVudCIsImpRdWVyeSIsIiQiLCIkYWN0aXZpdHlPYmplY3QiLCJhdHRyIiwiYXBwZW5kIiwiJGFycm93TGVmdE9iamVjdCIsInR5cGUiLCJjbGFzcyIsIiRhcnJvd1JpZ2h0T2JqZWN0IiwiJGFycm93cyIsImFkZCIsIiRjYXB0aW9uT2JqZWN0IiwiaHRtbCIsIiRidXR0b25PYmplY3QiLCIkb3ZlcmxheU9iamVjdCIsIiRuYXZJdGVtIiwiaHJlZiIsIiRuYXZPYmplY3QiLCIkd3JhcHBlciIsIiRib2R5IiwiY3NzVHJhbnNpdGlvblN1cHBvcnQiLCJzIiwiYm9keSIsImRvY3VtZW50RWxlbWVudCIsInN0eWxlIiwiV2Via2l0VHJhbnNpdGlvbiIsIk1velRyYW5zaXRpb24iLCJPVHJhbnNpdGlvbiIsInRyYW5zaXRpb24iLCJoYXNDc3NUcmFuc2l0aW9uU3VwcG9ydCIsImNzc1RyYW5zaXRpb25UcmFuc2xhdGVYIiwiZWxlbWVudCIsInBvc2l0aW9uWCIsInNwZWVkIiwib3B0aW9ucyIsInByZWZpeCIsImNzcyIsImhhc1RvdWNoIiwiaGFzUG9pbnRlcnMiLCJuYXZpZ2F0b3IiLCJwb2ludGVyRW5hYmxlZCIsIm1zUG9pbnRlckVuYWJsZWQiLCJ3YXNUb3VjaGVkIiwiZXZlbnQiLCJwb2ludGVyVHlwZSIsIk1TUE9JTlRFUl9UWVBFX01PVVNFIiwiaGFzRnVsbHNjcmVlblN1cHBvcnQiLCJmdWxsc2NyZWVuRW5hYmxlZCIsIndlYmtpdEZ1bGxzY3JlZW5FbmFibGVkIiwibW96RnVsbFNjcmVlbkVuYWJsZWQiLCJtc0Z1bGxzY3JlZW5FbmFibGVkIiwiaGFzSGlzdG9yeVN1cHBvcnQiLCJoaXN0b3J5IiwicHVzaFN0YXRlIiwiZm4iLCJpbWFnZUxpZ2h0Ym94Iiwib3B0cyIsInRhcmdldFNldCIsInRhcmdldHMiLCJ0YXJnZXQiLCJ2aWRlb3MiLCJ0YXJnZXRJbmRleCIsImltYWdlIiwiaW1hZ2VXaWR0aCIsImltYWdlSGVpZ2h0Iiwic3dpcGVEaWZmIiwiaW5Qcm9ncmVzcyIsImN1cnJlbnRJbmRleCIsImV4dGVuZCIsInNlbGVjdG9yIiwiaWQiLCJhbGxvd2VkVHlwZXMiLCJhbmltYXRpb25TcGVlZCIsImFjdGl2aXR5IiwiYXJyb3dzIiwiYnV0dG9uIiwiY2FwdGlvbiIsImVuYWJsZUtleWJvYXJkIiwiZnVsbHNjcmVlbiIsImd1dHRlciIsIm9mZnNldFkiLCJuYXZpZ2F0aW9uIiwib3ZlcmxheSIsInByZWxvYWROZXh0IiwicXVpdE9uRW5kIiwicXVpdE9uSW1nQ2xpY2siLCJxdWl0T25Eb2NDbGljayIsInF1aXRPbkVzY0tleSIsIl9vbkxvYWRFbmQiLCJhY3Rpdml0eUluZGljYXRvck9mZiIsIl9hZGRRdWVyeUZpZWxkIiwicXVlcnkiLCJrZXkiLCJ2YWx1ZSIsIm5ld0ZpZWxkIiwibmV3UXVlcnkiLCJrZXlSZWdleCIsIlJlZ0V4cCIsIm1hdGNoIiwicmVwbGFjZSIsIl9wdXNoVG9IaXN0b3J5IiwibmV3SW5kZXgiLCJkYXRhc2V0IiwiaWxiMklkIiwibmV3U3RhdGUiLCJpbWFnZUxpZ2h0Ym94SW5kZXgiLCJzZXQiLCJpbWFnZWxpZ2h0Ym94IiwiaW1hZ2VMaWdodGJveFNldCIsImxvY2F0aW9uIiwic2VhcmNoIiwicGF0aG5hbWUiLCJfcmVtb3ZlUXVlcnlGaWVsZCIsImtleVJlZ2V4MSIsImtleVJlZ2V4MiIsIl9nZXRRdWVyeUZpZWxkIiwia2V5VmFsdWVQYWlyIiwiZXhlYyIsImRlY29kZVVSSUNvbXBvbmVudCIsIl9vcGVuSGlzdG9yeSIsImZpbHRlciIsImxlbmd0aCIsImluZGV4IiwiX29wZW5JbWFnZUxpZ2h0Ym94IiwiX3ByZXZpb3VzVGFyZ2V0IiwiX3F1aXRJbWFnZUxpZ2h0Ym94IiwiZXEiLCJ0cmlnZ2VyIiwiX2xvYWRJbWFnZSIsIl9uZXh0VGFyZ2V0IiwiYWN0aXZpdHlJbmRpY2F0b3JPbiIsInJlbW92ZSIsIm92ZXJsYXlPbiIsImNsb3NlQnV0dG9uT24iLCJhcHBlbmRUbyIsIm9uIiwiY2FwdGlvblJlc2V0IiwiZGF0YSIsImZpbmQiLCJuYXZpZ2F0aW9uT24iLCJpIiwiY2xvbmUiLCIkbmF2SXRlbXMiLCJjaGlsZHJlbiIsImFkZENsYXNzIiwicmVtb3ZlQ2xhc3MiLCIkdGhpcyIsInRoaXMiLCJ0bXBUYXJnZXQiLCJzaWJsaW5ncyIsImFycm93c09uIiwiZSIsInN0b3BJbW1lZGlhdGVQcm9wYWdhdGlvbiIsInByZXZlbnREZWZhdWx0IiwiaGFzQ2xhc3MiLCJfc2V0SW1hZ2UiLCJjYXB0aW9uSGVpZ2h0Iiwib3V0ZXJIZWlnaHQiLCJzY3JlZW5XaWR0aCIsIndpZHRoIiwic2NyZWVuSGVpZ2h0IiwiaGVpZ2h0IiwiZ3V0dGVyRmFjdG9yIiwiTWF0aCIsImFicyIsInNldFNpemVzIiwicmF0aW8iLCJjc3NIZWlnaHQiLCJjc3NXaWR0aCIsImNzc0xlZnQiLCJsZWZ0IiwidW5kZWZpbmVkIiwiZ2V0IiwidmlkZW9XaWR0aCIsInZpZGVvSGVpZ2h0IiwidG1wSW1hZ2UiLCJJbWFnZSIsInNyYyIsIm9ubG9hZCIsImRpcmVjdGlvbiIsInBhcmFtcyIsIm9wYWNpdHkiLCJwYXJzZUludCIsImFuaW1hdGUiLCJfcmVtb3ZlSW1hZ2UiLCJzZXRUaW1lb3V0IiwicHJlbG9hZGVkVmlkZW8iLCJpbWdQYXRoIiwic3dpcGVTdGFydCIsInN3aXBlRW5kIiwiaW1hZ2VQb3NMZWZ0IiwibmV4dFRhcmdldCIsImVhY2giLCJsIiwiYSIsInBsYXkiLCJvcmlnaW5hbEV2ZW50IiwicGFnZVgiLCJvZmZzZXRMZWZ0IiwidG91Y2hlcyIsIiR0YXJnZXQiLCJub0hpc3RvcnkiLCJfb25TdGFydCIsIl9wdXNoUXVpdFRvSGlzdG9yeSIsIl9hZGRUYXJnZXRzIiwibmV3VGFyZ2V0cyIsImN1cnJlbnRUYXJnZXQiLCJwcm9wIiwidG9Mb3dlckNhc2UiLCJ0ZXN0Iiwic3RhdGUiLCJuZXdJZCIsInJlYWR5IiwiaXMiLCJpbmRleE9mIiwid2hpY2giLCJzdG9wUHJvcGFnYXRpb24iLCJnZXRFbGVtZW50QnlJZCIsInBhcmVudEVsZW1lbnQiLCJyZXF1ZXN0RnVsbHNjcmVlbiIsIm1velJlcXVlc3RGdWxsU2NyZWVuIiwid2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4iLCJtc1JlcXVlc3RGdWxsc2NyZWVuIiwiZXhpdEZ1bGxzY3JlZW4iLCJtb3pDYW5jZWxGdWxsU2NyZWVuIiwid2Via2l0RXhpdEZ1bGxzY3JlZW4iLCJvZmYiLCJ2aWRlb09wdGlvbnMiLCJyYW5kb20iLCJ0b1N0cmluZyIsImNvbnRhaW5lciIsInNvdXJjZXMiLCJfIiwic291cmNlIiwic291cmNlRWxlbWVudCIsImFkZFRvSW1hZ2VMaWdodGJveCIsImVsZW1lbnRzIiwib3Blbkhpc3RvcnkiLCJsb2FkUHJldmlvdXNJbWFnZSIsImxvYWROZXh0SW1hZ2UiLCJxdWl0SW1hZ2VMaWdodGJveCIsInN0YXJ0SW1hZ2VMaWdodGJveCJdLCJtYXBwaW5ncyI6IitQQU9FLFNBQVVBLEdBTUwsWUFBQSxvQkFBb0JDLE9BQXBCLFlBQUFDLFFBQW9CRCxVQUFVLFdBQUFDLFFBQW9CRCxPQUFPRSxTQUM1REgsRUFBU0ksUUFBUyxVQUFZQyxPQUFRQyxVQU10Q04sRUFBU08sT0FBUUYsT0FBUUMsVUFiM0IsQ0FlQyxTQUFVRSxFQUFHSCxFQUFRQyxHQUl0QixJQUFJRyxFQUFrQkQsRUFBRyxVQUNwQkUsS0FBTSxRQUFTLHlCQUNmQyxPQUFRSCxFQUFHLFdBQ2RJLEVBQW1CSixFQUFHLFlBQWEsQ0FDakNLLEtBQU0sU0FDTkMsTUFBTyxpREFFVEMsRUFBb0JQLEVBQUcsWUFBYSxDQUNsQ0ssS0FBTSxTQUNOQyxNQUFPLGtEQUVURSxFQUFVSixFQUFpQkssSUFBS0YsR0FDaENHLEVBQWlCVixFQUFHLFNBQVUsQ0FDNUJNLE1BQU8sd0JBQ1BLLEtBQU0sV0FFUkMsRUFBZ0JaLEVBQUcsWUFBYSxDQUM5QkssS0FBTSxTQUNOQyxNQUFPLHdC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LG1CQUFxQixTQUFVQyxHQUNsQ2hDLEVBQWFnQyxJQUdmekYsS0FBSzBGLFlBQWMsV0FDakJ0SCxLQUdGNEIsS0FBSzJGLGtCQUFvQixXQUN2QmxILEtBR0Z1QixLQUFLNEYsY0FBZ0IsV0FDbkI5RyxLQUdGa0IsS0FBSzZGLGtCQUFvQixXQUV2QixPQURBbkgsSUFDT3NCLE1BR1RBLEtBQUs4RixtQkFBcUIsU0FBVWxOLEdBQzdCQSxFQUNIQSxFQUFRZ0csUUFBUyxjQUVqQjlILEVBQUdrSixNQUFPcEIsUUFBUyxlQUloQm9CIiwiZmlsZSI6ImltYWdlLWxpZ2h0Ym94Lm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qIVxuICogSW1hZ2UgTGlnaHRib3gsIFJlc3BvbnNpdmUgYW5kIFRvdWNo4oCRZnJpZW5kbHlcbiAqIFZlcnNpb246IDAuMTQuMFxuICogSG9tZXBhZ2U6IGh0dHBzOi8vcmVqYXMuZ2l0aHViLmlvL2ltYWdlbGlnaHRib3hcbiAqIEdpdEh1YjogaHR0cHM6Ly9naXRodWIuY29tL3JlamFzL2ltYWdlbGlnaHRib3hcbiAqL1xuXG4oIGZ1bmN0aW9uKCBmYWN0b3J5ICkge1xuXG4gIC8vIGh0dHA6Ly9ibG9nLm5wbWpzLm9yZy9wb3N0LzExMjcxMjE2OTgzMC9tYWtpbmcteW91ci1qcXVlcnktcGx1Z2luLXdvcmstYmV0dGVyLXdpdGgtbnBtXG4gIC8vIElmIHRoZXJlIGlzIGEgdmFyaWFibGUgbmFtZWQgbW9kdWxlIGFuZCBpdCBoYXMgYW4gZXhwb3J0cyBwcm9wZXJ0eSxcbiAgLy8gdGhlbiB3ZSdyZSB3b3JraW5nIGluIGEgTm9kZS1saWtlIGVudmlyb25tZW50LiBVc2UgcmVxdWlyZSB0byBsb2FkXG4gIC8vIHRoZSBqUXVlcnkgb2JqZWN0IHRoYXQgdGhlIG1vZHVsZSBzeXN0ZW0gaXMgdXNpbmcgYW5kIHBhc3MgaXQgaW4uXG4gIGlmICggJ29iamVjdCcgPT09IHR5cGVvZiBtb2R1bGUgJiYgJ29iamVjdCcgPT09IHR5cGVvZiBtb2R1bGUuZXhwb3J0cyApIHtcbiAgICBmYWN0b3J5KCByZXF1aXJlKCAnanF1ZXJ5JyApLCB3aW5kb3csIGRvY3VtZW50ICk7XG4gIH1cblxuICAvLyBPdGhlcndpc2UsIHdlJ3JlIHdvcmtpbmcgaW4gYSBicm93c2VyLCBzbyBqdXN0IHBhc3MgaW4gdGhlIGdsb2JhbFxuICAvLyBqUXVlcnkgb2JqZWN0LlxuICBlbHNlIHtcbiAgICBmYWN0b3J5KCBqUXVlcnksIHdpbmRvdywgZG9jdW1lbnQgKTtcbiAgfVxufSggZnVuY3Rpb24oICQsIHdpbmRvdywgZG9jdW1lbnQgKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICAvLyBDT01QT05FTlRTIC8vXG4gIHZhciAkYWN0aXZpdHlPYmplY3QgPSAkKCAnPGRpdi8+JyApXG4gICAgICAuYXR0ciggJ2NsYXNzJywgJ2ltYWdlbGlnaHRib3gtbG9hZGluZycgKVxuICAgICAgLmFwcGVuZCggJCggJzxkaXYvPicgKSApLFxuICAgICRhcnJvd0xlZnRPYmplY3QgPSAkKCAnPGJ1dHRvbi8+Jywge1xuICAgICAgdHlwZTogJ2J1dHRvbicsXG4gICAgICBjbGFzczogJ2ltYWdlbGlnaHRib3gtYXJyb3cgaW1hZ2VsaWdodGJveC1hcnJvdy1sZWZ0J1xuICAgIH0pLFxuICAgICRhcnJvd1JpZ2h0T2JqZWN0ID0gJCggJzxidXR0b24vPicsIHtcbiAgICAgIHR5cGU6ICdidXR0b24nLFxuICAgICAgY2xhc3M6ICdpbWFnZWxpZ2h0Ym94LWFycm93IGltYWdlbGlnaHRib3gtYXJyb3ctcmlnaHQnXG4gICAgfSksXG4gICAgJGFycm93cyA9ICRhcnJvd0xlZnRPYmplY3QuYWRkKCAkYXJyb3dSaWdodE9iamVjdCApLFxuICAgICRjYXB0aW9uT2JqZWN0ID0gJCggJzxkaXYvPicsIHtcbiAgICAgIGNsYXNzOiAnaW1hZ2VsaWdodGJveC1jYXB0aW9uJyxcbiAgICAgIGh0bWw6ICcmbmJzcDsnXG4gICAgfSksXG4gICAgJGJ1dHRvbk9iamVjdCA9ICQoICc8YnV0dG9uLz4nLCB7XG4gICAgICB0eXBlOiAnYnV0dG9uJyxcbiAgICAgIGNsYXNzOiAnaW1hZ2VsaWdodGJveC1jbG9zZSdcbiAgICB9KSxcbiAgICAkb3ZlcmxheU9iamVjdCA9ICQoICc8ZGl2Lz4nLCB7XG4gICAgICBjbGFzczogJ2ltYWdlbGlnaHRib3gtb3ZlcmxheSdcbiAgICB9KSxcbiAgICAkbmF2SXRlbSA9ICQoICc8YS8+Jywge1xuICAgICAgaHJlZjogJyMnLFxuICAgICAgY2xhc3M6ICdpbWFnZWxpZ2h0Ym94LW5hdml0ZW0nXG4gICAgfSksXG4gICAgJG5hdk9iamVjdCA9ICQoICc8ZGl2Lz4nLCB7XG4gICAgICBjbGFzczogJ2ltYWdlbGlnaHRib3gtbmF2J1xuICAgIH0pLFxuICAgICR3cmFwcGVyID0gJCggJzxkaXYvPicsIHtcbiAgICAgIGNsYXNzOiAnaW1hZ2VsaWdodGJveC13cmFwcGVyJ1xuICAgIH0pLFxuICAgICRib2R5ID0gJCggJ2JvZHknICk7XG5cbiAgdmFyIGNzc1RyYW5zaXRpb25TdXBwb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICB2YXIgcyA9IGRvY3VtZW50LmJvZHkgfHwgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50O1xuICAgICAgcyA9IHMuc3R5bGU7XG4gICAgICBpZiAoICcnID09PSBzLldlYmtpdFRyYW5zaXRpb24gKSB7XG4gICAgICAgIHJldHVybiAnLXdlYmtpdC0nO1xuICAgICAgfVxuICAgICAgaWYgKCAnJyA9PT0gcy5Nb3pUcmFuc2l0aW9uICkge1xuICAgICAgICByZXR1cm4gJy1tb3otJztcbiAgICAgIH1cbiAgICAgIGlmICggJycgPT09IHMuT1RyYW5zaXRpb24gKSB7XG4gICAgICAgIHJldHVybiAnLW8tJztcbiAgICAgIH1cbiAgICAgIGlmICggJycgPT09IHMudHJhbnNpdGlvbiApIHtcbiAgICAgICAgcmV0dXJuICcnO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0sXG5cbiAgICBoYXNDc3NUcmFuc2l0aW9uU3VwcG9ydCA9IGZhbHNlICE9PSBjc3NUcmFuc2l0aW9uU3VwcG9ydCgpLFxuXG4gICAgY3NzVHJhbnNpdGlvblRyYW5zbGF0ZVggPSBmdW5jdGlvbiggZWxlbWVudCwgcG9zaXRpb25YLCBzcGVlZCApIHtcbiAgICAgIHZhciBvcHRpb25zID0ge30sXG4gICAgICAgIHByZWZpeCA9IGNzc1RyYW5zaXRpb25TdXBwb3J0KCk7XG4gICAgICBvcHRpb25zW3ByZWZpeCArICd0cmFuc2Zvcm0nXSA9ICd0cmFuc2xhdGVYKCcgKyBwb3NpdGlvblggKyAnKSB0cmFuc2xhdGVZKC01MCUpJztcbiAgICAgIG9wdGlvbnNbcHJlZml4ICsgJ3RyYW5zaXRpb24nXSA9IHByZWZpeCArICd0cmFuc2Zvcm0gJyArIHNwZWVkICsgJ3MgZWFzZS1pbic7XG4gICAgICBlbGVtZW50LmNzcyggb3B0aW9ucyApO1xuICAgIH0sXG5cbiAgICBoYXNUb3VjaCA9ICggJ29udG91Y2hzdGFydCcgaW4gd2luZG93ICksXG4gICAgaGFzUG9pbnRlcnMgPSB3aW5kb3cubmF2aWdhdG9yLnBvaW50ZXJFbmFibGVkIHx8IHdpbmRvdy5uYXZpZ2F0b3IubXNQb2ludGVyRW5hYmxlZCxcbiAgICB3YXNUb3VjaGVkID0gZnVuY3Rpb24oIGV2ZW50ICkge1xuICAgICAgaWYgKCBoYXNUb3VjaCApIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICAgIGlmICggISBoYXNQb2ludGVycyB8fCAndW5kZWZpbmVkJyA9PT0gdHlwZW9mIGV2ZW50IHx8ICd1bmRlZmluZWQnID09PSB0eXBlb2YgZXZlbnQucG9pbnRlclR5cGUgKSB7XG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgIH1cblxuICAgICAgaWYgKCAndW5kZWZpbmVkJyAhPT0gdHlwZW9mIGV2ZW50Lk1TUE9JTlRFUl9UWVBFX01PVVNFICkge1xuICAgICAgICBpZiAoIGV2ZW50Lk1TUE9JTlRFUl9UWVBFX01PVVNFICE9PSBldmVudC5wb2ludGVyVHlwZSApIHtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmICggJ21vdXNlJyAhPT0gZXZlbnQucG9pbnRlclR5cGUgKSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSxcblxuICAgIGZ1bGxzY3JlZW5TdXBwb3J0ID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gISEgKCBkb2N1bWVudC5mdWxsc2NyZWVuRW5hYmxlZCB8fFxuICAgICAgICBkb2N1bWVudC53ZWJraXRGdWxsc2NyZWVuRW5hYmxlZCB8fFxuICAgICAgICBkb2N1bWVudC5tb3pGdWxsU2NyZWVuRW5hYmxlZCB8fFxuICAgICAgICBkb2N1bWVudC5tc0Z1bGxzY3JlZW5FbmFibGVkICk7XG4gICAgfSxcbiAgICBoYXNGdWxsc2NyZWVuU3VwcG9ydCA9IGZhbHNlICE9PSBmdWxsc2NyZWVuU3VwcG9ydCgpLFxuICAgIGhhc0hpc3RvcnlTdXBwb3J0ID0gISEgKCB3aW5kb3cuaGlzdG9yeSAmJiBoaXN0b3J5LnB1c2hTdGF0ZSApO1xuXG4gICQuZm4uaW1hZ2VMaWdodGJveCA9IGZ1bmN0aW9uKCBvcHRzICkge1xuICAgIHZhciB0YXJnZXRTZXQgPSAnJyxcbiAgICAgIHRhcmdldHMgPSAkKFtdKSxcbiAgICAgIHRhcmdldCA9ICQoKSxcbiAgICAgIHZpZGVvcyA9ICQoW10pLFxuICAgICAgdGFyZ2V0SW5kZXggPSAtMSxcbiAgICAgIGltYWdlID0gJCgpLFxuICAgICAgaW1hZ2VXaWR0aCA9IDAsXG4gICAgICBpbWFnZUhlaWdodCA9IDAsXG4gICAgICBzd2lwZURpZmYgPSAwLFxuICAgICAgaW5Qcm9ncmVzcyA9IGZhbHNlLFxuICAgICAgY3VycmVudEluZGV4ID0gMCxcbiAgICAgIG9wdGlvbnMgPSAkLmV4dGVuZCh7XG4gICAgICAgIHNlbGVjdG9yOiAnYVtkYXRhLWltYWdlbGlnaHRib3hdJyxcbiAgICAgICAgaWQ6ICdpbWFnZWxpZ2h0Ym94JyxcbiAgICAgICAgYWxsb3dlZFR5cGVzOiAncG5nfGpwZ3xqcGVnfGdpZicsXG4gICAgICAgIGFuaW1hdGlvblNwZWVkOiAyNTAsXG4gICAgICAgIGFjdGl2aXR5OiBmYWxzZSxcbiAgICAgICAgYXJyb3dzOiBmYWxzZSxcbiAgICAgICAgYnV0dG9uOiBmYWxzZSxcbiAgICAgICAgY2FwdGlvbjogZmFsc2UsXG4gICAgICAgIGVuYWJsZUtleWJvYXJkOiB0cnVlLFxuICAgICAgICBoaXN0b3J5OiBmYWxzZSxcbiAgICAgICAgZnVsbHNjcmVlbjogZmFsc2UsXG4gICAgICAgIGd1dHRlcjogMTAsICAgICAvLyBwZXJjZW50YWdlIG9mIGNsaWVudCBoZWlnaHRcbiAgICAgICAgb2Zmc2V0WTogMCwgICAgICAvLyBwZXJjZW50YWdlIG9mIGd1dHRlclxuICAgICAgICBuYXZpZ2F0aW9uOiBmYWxzZSxcbiAgICAgICAgb3ZlcmxheTogZmFsc2UsXG4gICAgICAgIHByZWxvYWROZXh0OiB0cnVlLFxuICAgICAgICBxdWl0T25FbmQ6IGZhbHNlLFxuICAgICAgICBxdWl0T25JbWdDbGljazogZmFsc2UsXG4gICAgICAgIHF1aXRPbkRvY0NsaWNrOiB0cnVlLFxuICAgICAgICBxdWl0T25Fc2NLZXk6IHRydWVcbiAgICAgIH0sIG9wdHMgKSxcblxuICAgICAgX29uU3RhcnQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgaWYgKCBvcHRpb25zLmFycm93cyApIHtcbiAgICAgICAgICBhcnJvd3NPbiggdGhpcyApO1xuICAgICAgICB9XG4gICAgICAgIGlmICggb3B0aW9ucy5uYXZpZ2F0aW9uICkge1xuICAgICAgICAgIG5hdmlnYXRpb25PbigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICggb3B0aW9ucy5vdmVybGF5ICkge1xuICAgICAgICAgIG92ZXJsYXlPbigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICggb3B0aW9ucy5idXR0b24gKSB7XG4gICAgICAgICAgY2xvc2VCdXR0b25PbigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICggb3B0aW9ucy5jYXB0aW9uICkge1xuICAgICAgICAgICR3cmFwcGVyLmFwcGVuZCggJGNhcHRpb25PYmplY3QgKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF9vbkxvYWRTdGFydCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIG9wdGlvbnMuYWN0aXZpdHkgKSB7XG4gICAgICAgICAgYWN0aXZpdHlJbmRpY2F0b3JPbigpO1xuICAgICAgICB9XG4gICAgICAgIGlmICggb3B0aW9ucy5jYXB0aW9uICkge1xuICAgICAgICAgIGNhcHRpb25SZXNldCgpO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgX29uTG9hZEVuZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoIG9wdGlvbnMuYWN0aXZpdHkgKSB7XG4gICAgICAgICAgYWN0aXZpdHlJbmRpY2F0b3JPZmYoKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIG9wdGlvbnMuYXJyb3dzICkge1xuICAgICAgICAgICRhcnJvd3MuY3NzKCAnZGlzcGxheScsICdibG9jaycgKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIF9hZGRRdWVyeUZpZWxkID0gZnVuY3Rpb24oIHF1ZXJ5LCBrZXksIHZhbHVlICkge1xuICAgICAgICB2YXIgbmV3RmllbGQgPSBrZXkgKyAnPScgKyB2YWx1ZTtcbiAgICAgICAgdmFyIG5ld1F1ZXJ5ID0gJz8nICsgbmV3RmllbGQ7XG5cbiAgICAgICAgaWYgKCBxdWVyeSApIHtcbiAgICAgICAgICB2YXIga2V5UmVnZXggPSBuZXcgUmVnRXhwKCAnKFs/Jl0pJyArIGtleSArICc9W14mXSonICk7XG4gICAgICAgICAgaWYgKCBudWxsICE9PSBxdWVyeS5tYXRjaCgga2V5UmVnZXggKSApIHtcbiAgICAgICAgICAgIG5ld1F1ZXJ5ID0gcXVlcnkucmVwbGFjZSgga2V5UmVnZXgsICckMScgKyBuZXdGaWVsZCApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBuZXdRdWVyeSA9IHF1ZXJ5ICsgJyYnICsgbmV3RmllbGQ7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXdRdWVyeTtcbiAgICAgIH0sXG4gICAgICBfcHVzaFRvSGlzdG9yeSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoICEgaGFzSGlzdG9yeVN1cHBvcnQgfHwgISBvcHRpb25zLmhpc3RvcnkgKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBuZXdJbmRleCA9IHRhcmdldHNbdGFyZ2V0SW5kZXhdLmRhdGFzZXQuaWxiMklkO1xuICAgICAgICBpZiAoICEgbmV3SW5kZXggKSB7XG4gICAgICAgICAgbmV3SW5kZXggPSB0YXJnZXRJbmRleDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV3U3RhdGUgPSB7IGltYWdlTGlnaHRib3hJbmRleDogbmV3SW5kZXggfTtcbiAgICAgICAgdmFyIHNldCA9IHRhcmdldHNbdGFyZ2V0SW5kZXhdLmRhdGFzZXQuaW1hZ2VsaWdodGJveDtcbiAgICAgICAgaWYgKCBzZXQgKSB7XG4gICAgICAgICAgbmV3U3RhdGUuaW1hZ2VMaWdodGJveFNldCA9IHNldDtcbiAgICAgICAgfVxuICAgICAgICB2YXIgbmV3UXVlcnkgPSBfYWRkUXVlcnlGaWVsZCggZG9jdW1lbnQubG9jYXRpb24uc2VhcmNoLCAnaW1hZ2VMaWdodGJveEluZGV4JywgbmV3SW5kZXggKTtcbiAgICAgICAgaWYgKCBzZXQgKSB7XG4gICAgICAgICAgbmV3UXVlcnkgPSBfYWRkUXVlcnlGaWVsZCggbmV3UXVlcnksICdpbWFnZUxpZ2h0Ym94U2V0Jywgc2V0ICk7XG4gICAgICAgIH1cbiAgICAgICAgd2luZG93Lmhpc3RvcnkucHVzaFN0YXRlKCBuZXdTdGF0ZSwgJycsIGRvY3VtZW50LmxvY2F0aW9uLnBhdGhuYW1lICsgbmV3UXVlcnkgKTtcbiAgICAgIH0sXG4gICAgICBfcmVtb3ZlUXVlcnlGaWVsZCA9IGZ1bmN0aW9uKCBxdWVyeSwga2V5ICkge1xuICAgICAgICB2YXIgbmV3UXVlcnkgPSBxdWVyeTtcbiAgICAgICAgaWYgKCBuZXdRdWVyeSApIHtcbiAgICAgICAgICB2YXIga2V5UmVnZXgxID0gbmV3IFJlZ0V4cCggJ1s/XScgKyBrZXkgKyAnPVteJl0qJyApO1xuICAgICAgICAgIHZhciBrZXlSZWdleDIgPSBuZXcgUmVnRXhwKCAnJicgKyBrZXkgKyAnPVteJl0qJyApO1xuICAgICAgICAgIG5ld1F1ZXJ5ID0gbmV3UXVlcnkucmVwbGFjZSgga2V5UmVnZXgxLCAnPycgKTtcbiAgICAgICAgICBuZXdRdWVyeSA9IG5ld1F1ZXJ5LnJlcGxhY2UoIGtleVJlZ2V4MiwgJycgKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbmV3UXVlcnk7XG4gICAgICB9LFxuICAgICAgX3B1c2hRdWl0VG9IaXN0b3J5ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICggISBoYXNIaXN0b3J5U3VwcG9ydCB8fCAhIG9wdGlvbnMuaGlzdG9yeSApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5ld1F1ZXJ5ID0gX3JlbW92ZVF1ZXJ5RmllbGQoIGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaCwgJ2ltYWdlTGlnaHRib3hJbmRleCcgKTtcbiAgICAgICAgbmV3UXVlcnkgPSBfcmVtb3ZlUXVlcnlGaWVsZCggbmV3UXVlcnksICdpbWFnZUxpZ2h0Ym94U2V0JyApO1xuICAgICAgICB3aW5kb3cuaGlzdG9yeS5wdXNoU3RhdGUoe30sICcnLCBkb2N1bWVudC5sb2NhdGlvbi5wYXRobmFtZSArIG5ld1F1ZXJ5ICk7XG4gICAgICB9LFxuICAgICAgX2dldFF1ZXJ5RmllbGQgPSBmdW5jdGlvbigga2V5ICkge1xuICAgICAgICB2YXIga2V5VmFsdWVQYWlyID0gbmV3IFJlZ0V4cCggJ1s/Jl0nICsga2V5ICsgJyg9KFteJiNdKil8JnwjfCQpJyApLmV4ZWMoIGRvY3VtZW50LmxvY2F0aW9uLnNlYXJjaCApO1xuICAgICAgICBpZiAoICEga2V5VmFsdWVQYWlyIHx8ICEga2V5VmFsdWVQYWlyWzJdKSB7XG4gICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVjb2RlVVJJQ29tcG9uZW50KCBrZXlWYWx1ZVBhaXJbMl0ucmVwbGFjZSggL1xcKy9nLCAnICcgKSApO1xuICAgICAgfSxcbiAgICAgIF9vcGVuSGlzdG9yeSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICBpZiAoICEgaGFzSGlzdG9yeVN1cHBvcnQgfHwgISBvcHRpb25zLmhpc3RvcnkgKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBpZCA9IF9nZXRRdWVyeUZpZWxkKCAnaW1hZ2VMaWdodGJveEluZGV4JyApO1xuICAgICAgICBpZiAoICEgaWQgKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbGVtZW50ID0gdGFyZ2V0cy5maWx0ZXIoICdbZGF0YS1pbGIyLWlkPVwiJyArIGlkICsgJ1wiXScgKTtcbiAgICAgICAgaWYgKCAwIDwgZWxlbWVudC5sZW5ndGggKSB7XG4gICAgICAgICAgdGFyZ2V0SW5kZXggPSB0YXJnZXRzLmluZGV4KCBlbGVtZW50ICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFyZ2V0SW5kZXggPSBpZDtcbiAgICAgICAgICBlbGVtZW50ID0gJCggdGFyZ2V0c1t0YXJnZXRJbmRleF0pO1xuICAgICAgICB9XG4gICAgICAgIHZhciBzZXQgPSBfZ2V0UXVlcnlGaWVsZCggJ2ltYWdlTGlnaHRib3hTZXQnICk7XG4gICAgICAgIGlmICggISBlbGVtZW50WzBdIHx8ICggISEgc2V0ICYmIHNldCAhPT0gZWxlbWVudFswXS5kYXRhc2V0LmltYWdlbGlnaHRib3ggKSApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgX29wZW5JbWFnZUxpZ2h0Ym94KCBlbGVtZW50LCB0cnVlICk7XG4gICAgICB9LFxuICAgICAgX3BvcEhpc3RvcnkgPSBmdW5jdGlvbiggZXZlbnQgKSB7XG4gICAgICAgIHZhciBuZXdTdGF0ZSA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQuc3RhdGU7XG4gICAgICAgIGlmICggISBuZXdTdGF0ZSApIHtcbiAgICAgICAgICBfcXVpdEltYWdlTGlnaHRib3goIHRydWUgKTtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdmFyIG5ld0lkID0gbmV3U3RhdGUuaW1hZ2VMaWdodGJveEluZGV4O1xuICAgICAgICBpZiAoIG5ld0lkID09PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgX3F1aXRJbWFnZUxpZ2h0Ym94KCB0cnVlICk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBlbGVtZW50ID0gdGFyZ2V0cy5maWx0ZXIoICdbZGF0YS1pbGIyLWlkPVwiJyArIG5ld0lkICsgJ1wiXScgKTtcbiAgICAgICAgaWYgKCAwIDwgZWxlbWVudC5sZW5ndGggKSB7XG4gICAgICAgICAgdmFyIG5ld0luZGV4ID0gdGFyZ2V0cy5pbmRleCggZWxlbWVudCApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIG5ld0luZGV4ID0gbmV3SWQ7XG4gICAgICAgICAgZWxlbWVudCA9ICQoIHRhcmdldHNbbmV3SW5kZXhdKTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoICEgZWxlbWVudFswXSB8fCAoIG5ld1N0YXRlLmltYWdlTGlnaHRib3hTZXQgJiYgbmV3U3RhdGUuaW1hZ2VMaWdodGJveFNldCAhPT0gZWxlbWVudFswXS5kYXRhc2V0LmltYWdlbGlnaHRib3ggKSApIHtcbiAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgaWYgKCAwID4gdGFyZ2V0SW5kZXggKSB7XG4gICAgICAgICAgX29wZW5JbWFnZUxpZ2h0Ym94KCBlbGVtZW50LCB0cnVlICk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG4gICAgICAgIHZhciBkaXJlY3Rpb24gPSArMTtcbiAgICAgICAgaWYgKCBuZXdJbmRleCA+IHRhcmdldEluZGV4ICkge1xuICAgICAgICAgIGRpcmVjdGlvbiA9IC0xO1xuICAgICAgICB9XG4gICAgICAgIHRhcmdldCA9IGVsZW1lbnQ7XG4gICAgICAgIHRhcmdldEluZGV4ID0gbmV3SW5kZXg7XG4gICAgICAgIF9sb2FkSW1hZ2UoIGRpcmVjdGlvbiApO1xuICAgICAgfSxcbiAgICAgIF9wcmV2aW91c1RhcmdldCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB0YXJnZXRJbmRleC0tO1xuICAgICAgICBpZiAoIDAgPiB0YXJnZXRJbmRleCApIHtcbiAgICAgICAgICBpZiAoIHRydWUgPT09IG9wdGlvbnMucXVpdE9uRW5kICkge1xuICAgICAgICAgICAgX3F1aXRJbWFnZUxpZ2h0Ym94KCk7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRhcmdldEluZGV4ID0gdGFyZ2V0cy5sZW5ndGggLSAxO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICB0YXJnZXQgPSB0YXJnZXRzLmVxKCB0YXJnZXRJbmRleCApO1xuICAgICAgICBfcHVzaFRvSGlzdG9yeSgpO1xuICAgICAgICAkd3JhcHBlci50cmlnZ2VyKCAncHJldmlvdXMuaWxiMicsIHRhcmdldCApO1xuICAgICAgICBfbG9hZEltYWdlKCArMSApO1xuICAgICAgfSxcbiAgICAgIF9uZXh0VGFyZ2V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHRhcmdldEluZGV4Kys7XG4gICAgICAgIGlmICggdGFyZ2V0SW5kZXggPj0gdGFyZ2V0cy5sZW5ndGggKSB7XG4gICAgICAgICAgaWYgKCB0cnVlID09PSBvcHRpb25zLnF1aXRPbkVuZCApIHtcbiAgICAgICAgICAgIF9xdWl0SW1hZ2VMaWdodGJveCgpO1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0YXJnZXRJbmRleCA9IDA7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIF9wdXNoVG9IaXN0b3J5KCk7XG4gICAgICAgIHRhcmdldCA9IHRhcmdldHMuZXEoIHRhcmdldEluZGV4ICk7XG4gICAgICAgICR3cmFwcGVyLnRyaWdnZXIoICduZXh0LmlsYjInLCB0YXJnZXQgKTtcbiAgICAgICAgX2xvYWRJbWFnZSggLTEgKTtcbiAgICAgIH0sXG4gICAgICBhY3Rpdml0eUluZGljYXRvck9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICR3cmFwcGVyLmFwcGVuZCggJGFjdGl2aXR5T2JqZWN0ICk7XG4gICAgICB9LFxuICAgICAgYWN0aXZpdHlJbmRpY2F0b3JPZmYgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJCggJy5pbWFnZWxpZ2h0Ym94LWxvYWRpbmcnICkucmVtb3ZlKCk7XG4gICAgICB9LFxuICAgICAgb3ZlcmxheU9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICR3cmFwcGVyLmFwcGVuZCggJG92ZXJsYXlPYmplY3QgKTtcbiAgICAgIH0sXG4gICAgICBjbG9zZUJ1dHRvbk9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgICRidXR0b25PYmplY3QuYXBwZW5kVG8oICR3cmFwcGVyICkub24oICdjbGljay5pbGI3JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgX3F1aXRJbWFnZUxpZ2h0Ym94KCk7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBjYXB0aW9uUmVzZXQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgJGNhcHRpb25PYmplY3QuaHRtbCggJyZuYnNwOycgKTtcbiAgICAgICAgaWYgKCAkKCB0YXJnZXQgKS5kYXRhKCAnaWxiMi1jYXB0aW9uJyApICkge1xuICAgICAgICAgICRjYXB0aW9uT2JqZWN0Lmh0bWwoICQoIHRhcmdldCApLmRhdGEoICdpbGIyLWNhcHRpb24nICkgKTtcbiAgICAgICAgfSBlbHNlIGlmICggMCA8ICQoIHRhcmdldCApLmZpbmQoICdpbWcnICkubGVuZ3RoICkge1xuICAgICAgICAgICRjYXB0aW9uT2JqZWN0Lmh0bWwoICQoIHRhcmdldCApLmZpbmQoICdpbWcnICkuYXR0ciggJ2FsdCcgKSApO1xuICAgICAgICB9XG4gICAgICB9LFxuICAgICAgbmF2aWdhdGlvbk9uID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICggdGFyZ2V0cy5sZW5ndGggKSB7XG4gICAgICAgICAgZm9yICggdmFyIGkgPSAwOyBpIDwgdGFyZ2V0cy5sZW5ndGg7IGkrKyApIHtcbiAgICAgICAgICAgICRuYXZPYmplY3QuYXBwZW5kKCAkbmF2SXRlbS5jbG9uZSgpICk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhciAkbmF2SXRlbXMgPSAkbmF2T2JqZWN0LmNoaWxkcmVuKCAnYScgKTtcbiAgICAgICAgICAkbmF2SXRlbXMuZXEoIHRhcmdldHMuaW5kZXgoIHRhcmdldCApICkuYWRkQ2xhc3MoICdhY3RpdmUnICk7XG5cbiAgICAgICAgICAvL1xuICAgICAgICAgICR3cmFwcGVyLm9uKCAncHJldmlvdXMuaWxiMiBuZXh0LmlsYjInLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICRuYXZJdGVtcy5yZW1vdmVDbGFzcyggJ2FjdGl2ZScgKS5lcSggdGFyZ2V0cy5pbmRleCggdGFyZ2V0ICkgKS5hZGRDbGFzcyggJ2FjdGl2ZScgKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICAkd3JhcHBlci5hcHBlbmQoICRuYXZPYmplY3QgKTtcblxuICAgICAgICAgIC8vXG4gICAgICAgICAgJG5hdk9iamVjdFxuICAgICAgICAgICAgLm9uKCAnY2xpY2suaWxiNyB0b3VjaGVuZC5pbGI3JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub24oICdjbGljay5pbGI3IHRvdWNoZW5kLmlsYjcnLCAnYScsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICB2YXIgJHRoaXMgPSAkKCB0aGlzICk7XG4gICAgICAgICAgICAgIGlmICggdGFyZ2V0cy5lcSggJHRoaXMuaW5kZXgoKSApLmF0dHIoICdocmVmJyApICE9PSAkKCAnLmltYWdlbGlnaHRib3gnICkuYXR0ciggJ3NyYycgKSApIHtcbiAgICAgICAgICAgICAgICB2YXIgdG1wVGFyZ2V0ID0gdGFyZ2V0cy5lcSggJHRoaXMuaW5kZXgoKSApO1xuICAgICAgICAgICAgICAgIGlmICggdG1wVGFyZ2V0Lmxlbmd0aCApIHtcbiAgICAgICAgICAgICAgICAgIGN1cnJlbnRJbmRleCA9IHRhcmdldHMuaW5kZXgoIHRhcmdldCApO1xuICAgICAgICAgICAgICAgICAgdGFyZ2V0ID0gdG1wVGFyZ2V0O1xuICAgICAgICAgICAgICAgICAgX2xvYWRJbWFnZSggJHRoaXMuaW5kZXgoKSA8IGN1cnJlbnRJbmRleCA/IC0xIDogMSApO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAkdGhpcy5hZGRDbGFzcyggJ2FjdGl2ZScgKS5zaWJsaW5ncygpLnJlbW92ZUNsYXNzKCAnYWN0aXZlJyApO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhcnJvd3NPbiA9IGZ1bmN0aW9uKCkge1xuICAgICAgICAkd3JhcHBlci5hcHBlbmQoICRhcnJvd3MgKTtcbiAgICAgICAgJGFycm93cy5vbiggJ2NsaWNrLmlsYjcgdG91Y2hlbmQuaWxiNycsIGZ1bmN0aW9uKCBlICkge1xuICAgICAgICAgIGUuc3RvcEltbWVkaWF0ZVByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGlmICggJCggdGhpcyApLmhhc0NsYXNzKCAnaW1hZ2VsaWdodGJveC1hcnJvdy1sZWZ0JyApICkge1xuICAgICAgICAgICAgX3ByZXZpb3VzVGFyZ2V0KCk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIF9uZXh0VGFyZ2V0KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfSk7XG4gICAgICB9LFxuXG4gICAgICBpc1RhcmdldFZhbGlkID0gZnVuY3Rpb24oIGVsZW1lbnQgKSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZVxuICAgICAgICByZXR1cm4gJChlbGVtZW50KS5wcm9wKCd0YWdOYW1lJykudG9Mb3dlckNhc2UoKSA9PT0gJ2EnICYmICgobmV3IFJlZ0V4cCgnXFwuKCcgKyBvcHRpb25zLmFsbG93ZWRUeXBlcyArICcpJCcsICdpJykpLnRlc3QoJChlbGVtZW50KS5hdHRyKCdocmVmJykpIHx8ICQoZWxlbWVudCkuZGF0YSgnaWxiMlZpZGVvJykpO1xuICAgICAgfSxcblxuICAgICAgX3NldEltYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICggISBpbWFnZS5sZW5ndGggKSB7XG4gICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB2YXIgY2FwdGlvbkhlaWdodCA9IG9wdGlvbnMuY2FwdGlvbiA/ICRjYXB0aW9uT2JqZWN0Lm91dGVySGVpZ2h0KCkgOiAwLFxuICAgICAgICAgIHNjcmVlbldpZHRoID0gJCggd2luZG93ICkud2lkdGgoKSxcbiAgICAgICAgICBzY3JlZW5IZWlnaHQgPSAkKCB3aW5kb3cgKS5oZWlnaHQoKSAtIGNhcHRpb25IZWlnaHQsXG4gICAgICAgICAgZ3V0dGVyRmFjdG9yID0gTWF0aC5hYnMoIDEgLSBvcHRpb25zLmd1dHRlciAvIDEwMCApO1xuXG4gICAgICAgIGZ1bmN0aW9uIHNldFNpemVzKCkge1xuICAgICAgICAgIGlmICggaW1hZ2VXaWR0aCA+IHNjcmVlbldpZHRoIHx8IGltYWdlSGVpZ2h0ID4gc2NyZWVuSGVpZ2h0ICkge1xuICAgICAgICAgICAgdmFyIHJhdGlvID0gaW1hZ2VXaWR0aCAvIGltYWdlSGVpZ2h0ID4gc2NyZWVuV2lkdGggLyBzY3JlZW5IZWlnaHQgPyBpbWFnZVdpZHRoIC8gc2NyZWVuV2lkdGggOiBpbWFnZUhlaWdodCAvIHNjcmVlbkhlaWdodDtcbiAgICAgICAgICAgIGltYWdlV2lkdGggLz0gcmF0aW87XG4gICAgICAgICAgICBpbWFnZUhlaWdodCAvPSByYXRpbztcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFyIGNzc0hlaWdodCA9IGltYWdlSGVpZ2h0ICogZ3V0dGVyRmFjdG9yLFxuICAgICAgICAgICAgY3NzV2lkdGggPSBpbWFnZVdpZHRoICogZ3V0dGVyRmFjdG9yLFxuICAgICAgICAgICAgY3NzTGVmdCA9ICggJCggd2luZG93ICkud2lkdGgoKSAtIGNzc1dpZHRoICkgLyAyO1xuXG4gICAgICAgICAgaW1hZ2UuY3NzKHtcbiAgICAgICAgICAgICd3aWR0aCc6IGNzc1dpZHRoICsgJ3B4JyxcbiAgICAgICAgICAgICdoZWlnaHQnOiBjc3NIZWlnaHQgKyAncHgnLFxuICAgICAgICAgICAgJ2xlZnQnOiBjc3NMZWZ0ICsgJ3B4J1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCBpbWFnZS5nZXQoIDAgKS52aWRlb1dpZHRoICE9PSB1bmRlZmluZWQgKSB7XG4gICAgICAgICAgaW1hZ2VXaWR0aCA9IGltYWdlLmdldCggMCApLnZpZGVvV2lkdGg7XG4gICAgICAgICAgaW1hZ2VIZWlnaHQgPSBpbWFnZS5nZXQoIDAgKS52aWRlb0hlaWdodDtcbiAgICAgICAgICBzZXRTaXplcygpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHZhciB0bXBJbWFnZSA9IG5ldyBJbWFnZSgpO1xuICAgICAgICB0bXBJbWFnZS5zcmMgPSBpbWFnZS5hdHRyKCAnc3JjJyApO1xuICAgICAgICB0bXBJbWFnZS5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgICBpbWFnZVdpZHRoID0gdG1wSW1hZ2Uud2lkdGg7XG4gICAgICAgICAgaW1hZ2VIZWlnaHQgPSB0bXBJbWFnZS5oZWlnaHQ7XG4gICAgICAgICAgc2V0U2l6ZXMoKTtcbiAgICAgICAgfTtcbiAgICAgIH0sXG5cbiAgICAgIF9sb2FkSW1hZ2UgPSBmdW5jdGlvbiggZGlyZWN0aW9uICkge1xuICAgICAgICBpZiAoIGluUHJvZ3Jlc3MgKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKCBpbWFnZS5sZW5ndGggKSB7XG4gICAgICAgICAgdmFyIHBhcmFtcyA9IHsgJ29wYWNpdHknOiAwIH07XG4gICAgICAgICAgaWYgKCBoYXNDc3NUcmFuc2l0aW9uU3VwcG9ydCApIHtcbiAgICAgICAgICAgIGNzc1RyYW5zaXRpb25UcmFuc2xhdGVYKCBpbWFnZSwgKCAxMDAgKiBkaXJlY3Rpb24gKSAtIHN3aXBlRGlmZiArICdweCcsIG9wdGlvbnMuYW5pbWF0aW9uU3BlZWQgLyAxMDAwICk7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHBhcmFtcy5sZWZ0ID0gcGFyc2VJbnQoIGltYWdlLmNzcyggJ2xlZnQnICkgKSArICggMTAwICogZGlyZWN0aW9uICkgKyAncHgnO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpbWFnZS5hbmltYXRlKCBwYXJhbXMsIG9wdGlvbnMuYW5pbWF0aW9uU3BlZWQsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgX3JlbW92ZUltYWdlKCk7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc3dpcGVEaWZmID0gMDtcbiAgICAgICAgfVxuXG4gICAgICAgIGluUHJvZ3Jlc3MgPSB0cnVlO1xuICAgICAgICBfb25Mb2FkU3RhcnQoKTtcblxuICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgaW1nUGF0aCA9IHRhcmdldC5hdHRyKCAnaHJlZicgKSxcbiAgICAgICAgICAgIHN3aXBlU3RhcnQgPSAwLFxuICAgICAgICAgICAgc3dpcGVFbmQgPSAwLFxuICAgICAgICAgICAgaW1hZ2VQb3NMZWZ0ID0gMDtcblxuICAgICAgICAgIC8vIGlmIChpbWdQYXRoID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAvLyAgICAgaW1nUGF0aCA9IHRhcmdldC5hdHRyKCdkYXRhLWxpZ2h0Ym94Jyk7XG4gICAgICAgICAgLy8gfVxuXG4gICAgICAgICAgdmFyIHZpZGVvT3B0aW9ucyA9IHRhcmdldC5kYXRhKCAnaWxiMlZpZGVvJyApO1xuICAgICAgICAgIHZhciBwcmVsb2FkZWRWaWRlbywgZWxlbWVudDtcbiAgICAgICAgICBpZiAoIHZpZGVvT3B0aW9ucyApIHtcbiAgICAgICAgICAgIHZpZGVvcy5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaWYgKCB0aGlzLmkgPT09IHRhcmdldC5kYXRhKCAnaWxiMlZpZGVvSWQnICkgKSB7XG4gICAgICAgICAgICAgICAgcHJlbG9hZGVkVmlkZW8gPSB0aGlzLmw7XG4gICAgICAgICAgICAgICAgZWxlbWVudCA9IHRoaXMuZTtcbiAgICAgICAgICAgICAgICBpZiAoIHRoaXMuYSApIHtcbiAgICAgICAgICAgICAgICAgIGlmICggZmFsc2UgPT09IHByZWxvYWRlZFZpZGVvICkge1xuICAgICAgICAgICAgICAgICAgICBlbGVtZW50LmF0dHIoICdhdXRvcGxheScsIHRoaXMuYSApO1xuICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgaWYgKCB0cnVlID09PSBwcmVsb2FkZWRWaWRlbyApIHtcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5nZXQoIDAgKS5wbGF5KCk7XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZWxlbWVudCA9ICQoICc8aW1nIGlkPVxcJycgKyBvcHRpb25zLmlkICsgJ1xcJyAvPicgKVxuICAgICAgICAgICAgICAuYXR0ciggJ3NyYycsIGltZ1BhdGggKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZnVuY3Rpb24gb25sb2FkKCkge1xuICAgICAgICAgICAgdmFyIHBhcmFtcyA9IHsgJ29wYWNpdHknOiAxIH07XG5cbiAgICAgICAgICAgIGltYWdlLmFwcGVuZFRvKCAkd3JhcHBlciApO1xuICAgICAgICAgICAgX3NldEltYWdlKCk7XG4gICAgICAgICAgICBpbWFnZS5jc3MoICdvcGFjaXR5JywgMCApO1xuICAgICAgICAgICAgaWYgKCBoYXNDc3NUcmFuc2l0aW9uU3VwcG9ydCApIHtcbiAgICAgICAgICAgICAgY3NzVHJhbnNpdGlvblRyYW5zbGF0ZVgoIGltYWdlLCAtMTAwICogZGlyZWN0aW9uICsgJ3B4JywgMCApO1xuICAgICAgICAgICAgICBzZXRUaW1lb3V0KCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgICBjc3NUcmFuc2l0aW9uVHJhbnNsYXRlWCggaW1hZ2UsIDAgKyAncHgnLCBvcHRpb25zLmFuaW1hdGlvblNwZWVkIC8gMTAwMCApO1xuICAgICAgICAgICAgICB9LCA1MCApO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgdmFyIGltYWdlUG9zTGVmdCA9IHBhcnNlSW50KCBpbWFnZS5jc3MoICdsZWZ0JyApICk7XG4gICAgICAgICAgICAgIHBhcmFtcy5sZWZ0ID0gaW1hZ2VQb3NMZWZ0ICsgJ3B4JztcbiAgICAgICAgICAgICAgaW1hZ2UuY3NzKCAnbGVmdCcsIGltYWdlUG9zTGVmdCAtIDEwMCAqIGRpcmVjdGlvbiArICdweCcgKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaW1hZ2UuYW5pbWF0ZSggcGFyYW1zLCBvcHRpb25zLmFuaW1hdGlvblNwZWVkLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgaW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICAgICAgICBfb25Mb2FkRW5kKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmICggb3B0aW9ucy5wcmVsb2FkTmV4dCApIHtcbiAgICAgICAgICAgICAgdmFyIG5leHRUYXJnZXQgPSB0YXJnZXRzLmVxKCB0YXJnZXRzLmluZGV4KCB0YXJnZXQgKSArIDEgKTtcbiAgICAgICAgICAgICAgaWYgKCAhIG5leHRUYXJnZXQubGVuZ3RoICkge1xuICAgICAgICAgICAgICAgIG5leHRUYXJnZXQgPSB0YXJnZXRzLmVxKCAwICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgJCggJzxpbWcgLz4nICkuYXR0ciggJ3NyYycsIG5leHRUYXJnZXQuYXR0ciggJ2hyZWYnICkgKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICR3cmFwcGVyLnRyaWdnZXIoICdsb2FkZWQuaWxiMicgKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaW1hZ2UgPSBlbGVtZW50XG4gICAgICAgICAgICAub24oICdsb2FkLmlsYjcnLCBvbmxvYWQgKVxuICAgICAgICAgICAgLm9uKCAnZXJyb3IuaWxiNycsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICBfb25Mb2FkRW5kKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCBoYXNQb2ludGVycyA/ICdwb2ludGVydXAuaWxiNyBNU1BvaW50ZXJVcC5pbGI3JyA6ICdjbGljay5pbGI3JywgZnVuY3Rpb24oIGUgKSB7XG4gICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgaWYgKCBvcHRpb25zLnF1aXRPbkltZ0NsaWNrICkge1xuICAgICAgICAgICAgICAgIF9xdWl0SW1hZ2VMaWdodGJveCgpO1xuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoIHdhc1RvdWNoZWQoIGUub3JpZ2luYWxFdmVudCApICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIHZhciBwb3NYID0gKCBlLnBhZ2VYIHx8IGUub3JpZ2luYWxFdmVudC5wYWdlWCApIC0gZS50YXJnZXQub2Zmc2V0TGVmdDtcbiAgICAgICAgICAgICAgaWYgKCBpbWFnZVdpZHRoIC8gMiA+IHBvc1ggKSB7XG4gICAgICAgICAgICAgICAgX3ByZXZpb3VzVGFyZ2V0KCk7XG4gICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgX25leHRUYXJnZXQoKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgICAgIC5vbiggJ3RvdWNoc3RhcnQuaWxiNyBwb2ludGVyZG93bi5pbGI3IE1TUG9pbnRlckRvd24uaWxiNycsIGZ1bmN0aW9uKCBlICkge1xuICAgICAgICAgICAgICBpZiAoICEgd2FzVG91Y2hlZCggZS5vcmlnaW5hbEV2ZW50ICkgfHwgb3B0aW9ucy5xdWl0T25JbWdDbGljayApIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICBpZiAoIGhhc0Nzc1RyYW5zaXRpb25TdXBwb3J0ICkge1xuICAgICAgICAgICAgICAgIGltYWdlUG9zTGVmdCA9IHBhcnNlSW50KCBpbWFnZS5jc3MoICdsZWZ0JyApICk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgc3dpcGVTdGFydCA9IGUub3JpZ2luYWxFdmVudC5wYWdlWCB8fCBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAub24oICd0b3VjaG1vdmUuaWxiNyBwb2ludGVybW92ZS5pbGI3IE1TUG9pbnRlck1vdmUuaWxiNycsIGZ1bmN0aW9uKCBlICkge1xuICAgICAgICAgICAgICBpZiAoICggISBoYXNQb2ludGVycyAmJiAncG9pbnRlcm1vdmUnID09PSBlLnR5cGUgKSB8fCAhIHdhc1RvdWNoZWQoIGUub3JpZ2luYWxFdmVudCApIHx8IG9wdGlvbnMucXVpdE9uSW1nQ2xpY2sgKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICBzd2lwZUVuZCA9IGUub3JpZ2luYWxFdmVudC5wYWdlWCB8fCBlLm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgICAgICAgc3dpcGVEaWZmID0gc3dpcGVTdGFydCAtIHN3aXBlRW5kO1xuICAgICAgICAgICAgICBpZiAoIGhhc0Nzc1RyYW5zaXRpb25TdXBwb3J0ICkge1xuICAgICAgICAgICAgICAgIGNzc1RyYW5zaXRpb25UcmFuc2xhdGVYKCBpbWFnZSwgLXN3aXBlRGlmZiArICdweCcsIDAgKTtcbiAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpbWFnZS5jc3MoICdsZWZ0JywgaW1hZ2VQb3NMZWZ0IC0gc3dpcGVEaWZmICsgJ3B4JyApO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLm9uKCAndG91Y2hlbmQuaWxiNyB0b3VjaGNhbmNlbC5pbGI3IHBvaW50ZXJ1cC5pbGI3IHBvaW50ZXJjYW5jZWwuaWxiNyBNU1BvaW50ZXJVcC5pbGI3IE1TUG9pbnRlckNhbmNlbC5pbGI3JywgZnVuY3Rpb24oIGUgKSB7XG4gICAgICAgICAgICAgIGlmICggISB3YXNUb3VjaGVkKCBlLm9yaWdpbmFsRXZlbnQgKSB8fCBvcHRpb25zLnF1aXRPbkltZ0NsaWNrICkge1xuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgIGlmICggNTAgPCBNYXRoLmFicyggc3dpcGVEaWZmICkgKSB7XG4gICAgICAgICAgICAgICAgaWYgKCAwID4gc3dpcGVEaWZmICkge1xuICAgICAgICAgICAgICAgICAgX3ByZXZpb3VzVGFyZ2V0KCk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgIF9uZXh0VGFyZ2V0KCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGlmICggaGFzQ3NzVHJhbnNpdGlvblN1cHBvcnQgKSB7XG4gICAgICAgICAgICAgICAgICBjc3NUcmFuc2l0aW9uVHJhbnNsYXRlWCggaW1hZ2UsIDAgKyAncHgnLCBvcHRpb25zLmFuaW1hdGlvblNwZWVkIC8gMTAwMCApO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICBpbWFnZS5hbmltYXRlKHsgJ2xlZnQnOiBpbWFnZVBvc0xlZnQgKyAncHgnIH0sIG9wdGlvbnMuYW5pbWF0aW9uU3BlZWQgLyAyICk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICBpZiAoIHRydWUgPT09IHByZWxvYWRlZFZpZGVvICkge1xuICAgICAgICAgICAgb25sb2FkKCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICggZmFsc2UgPT09IHByZWxvYWRlZFZpZGVvICkge1xuICAgICAgICAgICAgaW1hZ2UgPSBpbWFnZS5vbiggJ2xvYWRlZG1ldGFkYXRhLmlsYjcnLCBvbmxvYWQgKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfSwgb3B0aW9ucy5hbmltYXRpb25TcGVlZCArIDEwMCApO1xuICAgICAgfSxcblxuICAgICAgX3JlbW92ZUltYWdlID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICggISBpbWFnZS5sZW5ndGggKSB7XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9XG4gICAgICAgIGltYWdlLnJlbW92ZSgpO1xuICAgICAgICBpbWFnZSA9ICQoKTtcbiAgICAgIH0sXG5cbiAgICAgIF9vcGVuSW1hZ2VMaWdodGJveCA9IGZ1bmN0aW9uKCAkdGFyZ2V0LCBub0hpc3RvcnkgKSB7XG4gICAgICAgIGlmICggaW5Qcm9ncmVzcyApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgICAgICB0YXJnZXQgPSAkdGFyZ2V0O1xuICAgICAgICB0YXJnZXRJbmRleCA9IHRhcmdldHMuaW5kZXgoIHRhcmdldCApO1xuICAgICAgICBpZiAoICEgbm9IaXN0b3J5ICkge1xuICAgICAgICAgIF9wdXNoVG9IaXN0b3J5KCk7XG4gICAgICAgIH1cbiAgICAgICAgX29uU3RhcnQoKTtcbiAgICAgICAgJGJvZHkuYXBwZW5kKCAkd3JhcHBlciApXG4gICAgICAgICAgLmFkZENsYXNzKCAnaW1hZ2VsaWdodGJveC1vcGVuJyApO1xuICAgICAgICAkd3JhcHBlci50cmlnZ2VyKCAnc3RhcnQuaWxiMicsICR0YXJnZXQgKTtcbiAgICAgICAgX2xvYWRJbWFnZSggMCApO1xuICAgICAgfSxcblxuICAgICAgX3F1aXRJbWFnZUxpZ2h0Ym94ID0gZnVuY3Rpb24oIG5vSGlzdG9yeSApIHtcbiAgICAgICAgdGFyZ2V0SW5kZXggPSAtMTtcbiAgICAgICAgaWYgKCAhIG5vSGlzdG9yeSApIHtcbiAgICAgICAgICBfcHVzaFF1aXRUb0hpc3RvcnkoKTtcbiAgICAgICAgfVxuICAgICAgICAkd3JhcHBlci50cmlnZ2VyKCAncXVpdC5pbGIyJyApO1xuICAgICAgICAkYm9keS5yZW1vdmVDbGFzcyggJ2ltYWdlbGlnaHRib3gtb3BlbicgKTtcbiAgICAgICAgaWYgKCAhIGltYWdlLmxlbmd0aCApIHtcbiAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICAgICAgaW1hZ2UuYW5pbWF0ZSh7ICdvcGFjaXR5JzogMCB9LCBvcHRpb25zLmFuaW1hdGlvblNwZWVkLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICBfcmVtb3ZlSW1hZ2UoKTtcbiAgICAgICAgICBpblByb2dyZXNzID0gZmFsc2U7XG4gICAgICAgICAgJHdyYXBwZXIucmVtb3ZlKCkuZmluZCggJyonICkucmVtb3ZlKCk7XG4gICAgICAgIH0pO1xuICAgICAgfSxcblxuICAgICAgX2FkZFRhcmdldHMgPSBmdW5jdGlvbiggbmV3VGFyZ2V0cyApIHtcbiAgICAgICAgbmV3VGFyZ2V0cy5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB0YXJnZXRzID0gbmV3VGFyZ2V0cy5hZGQoICQoIHRoaXMgKSApO1xuICAgICAgICB9KTtcbiAgICAgICAgbmV3VGFyZ2V0cy5vbiggJ2NsaWNrLmlsYjcnLCB7IHNldDogdGFyZ2V0U2V0IH0sIGZ1bmN0aW9uKCBlICkge1xuICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICB0YXJnZXRTZXQgPSAkKCBlLmN1cnJlbnRUYXJnZXQgKS5kYXRhKCAnaW1hZ2VsaWdodGJveCcgKTtcbiAgICAgICAgICBmaWx0ZXJUYXJnZXRzKCk7XG4gICAgICAgICAgaWYgKCAxID4gdGFyZ2V0cy5sZW5ndGggKSB7XG4gICAgICAgICAgICBfcXVpdEltYWdlTGlnaHRib3goKTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgX29wZW5JbWFnZUxpZ2h0Ym94KCAkKCB0aGlzICkgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgICBmdW5jdGlvbiBmaWx0ZXJUYXJnZXRzKCkge1xuICAgICAgICAgIG5ld1RhcmdldHNcbiAgICAgICAgICAgIC5maWx0ZXIoIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICByZXR1cm4gJCggdGhpcyApLmRhdGEoICdpbWFnZWxpZ2h0Ym94JyApID09PSB0YXJnZXRTZXQ7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLmZpbHRlciggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHJldHVybiBpc1RhcmdldFZhbGlkKCAkKCB0aGlzICkgKTtcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuZWFjaCggZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICAgIHRhcmdldHMgPSB0YXJnZXRzLmFkZCggJCggdGhpcyApICk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSxcblxuICAgICAgX3ByZWxvYWRWaWRlb3MgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgdGFyZ2V0cy5lYWNoKCBmdW5jdGlvbigpIHtcbiAgICAgICAgICB2YXIgdmlkZW9PcHRpb25zID0gJCggdGhpcyApLmRhdGEoICdpbGIyVmlkZW8nICk7XG4gICAgICAgICAgaWYgKCB2aWRlb09wdGlvbnMgKSB7XG4gICAgICAgICAgICB2YXIgaWQgPSAkKCB0aGlzICkuZGF0YSggJ2lsYjJJZCcgKTtcbiAgICAgICAgICAgIGlmICggISBpZCApIHtcbiAgICAgICAgICAgICAgaWQgPSAnYScgKyAoICggKCAxICsgTWF0aC5yYW5kb20oKSApICogMHgxMDAwMCApIHwgMCApLnRvU3RyaW5nKCAxNiApOyAvLyBSYW5kb20gaWRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgICQoIHRoaXMgKS5kYXRhKCAnaWxiMlZpZGVvSWQnLCBpZCApO1xuICAgICAgICAgICAgdmFyIGNvbnRhaW5lciA9IHsgZTogJCggJzx2aWRlbyBpZD1cXCcnICsgb3B0aW9ucy5pZCArICdcXCcgcHJlbG9hZD1cXCdtZXRhZGF0YVxcJz4nICksIGk6IGlkLCBsOiBmYWxzZSwgYTogdW5kZWZpbmVkIH07IC8vIGUgPSBlbGVtZW50LCBpID0gaWQsIGwgPSBpcyBtZXRhZGF0YSBsb2FkZWQsIGEgPSBhdXRvcGxheVxuICAgICAgICAgICAgJC5lYWNoKCB2aWRlb09wdGlvbnMsIGZ1bmN0aW9uKCBrZXksIHZhbHVlICkge1xuICAgICAgICAgICAgICBpZiAoICdhdXRvcGxheScgPT09IGtleSApIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuYSA9IHZhbHVlO1xuICAgICAgICAgICAgICB9IGVsc2UgaWYgKCAnc291cmNlcycgIT09IGtleSApIHtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuZSA9IGNvbnRhaW5lci5lLmF0dHIoIGtleSwgdmFsdWUgKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoIHZpZGVvT3B0aW9ucy5zb3VyY2VzICkge1xuICAgICAgICAgICAgICAkLmVhY2goIHZpZGVvT3B0aW9ucy5zb3VyY2VzLCBmdW5jdGlvbiggXywgc291cmNlICkge1xuICAgICAgICAgICAgICAgIHZhciBzb3VyY2VFbGVtZW50ID0gJCggJzxzb3VyY2U+JyApO1xuICAgICAgICAgICAgICAgICQuZWFjaCggc291cmNlLCBmdW5jdGlvbigga2V5LCB2YWx1ZSApIHtcbiAgICAgICAgICAgICAgICAgIHNvdXJjZUVsZW1lbnQgPSBzb3VyY2VFbGVtZW50LmF0dHIoIGtleSwgdmFsdWUgKTtcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBjb250YWluZXIuZS5hcHBlbmQoIHNvdXJjZUVsZW1lbnQgKTtcbiAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb250YWluZXIuZS5vbiggJ2xvYWRlZG1ldGFkYXRhLmlsYjcnLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgICAgY29udGFpbmVyLmwgPSB0cnVlO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB2aWRlb3MgPSB2aWRlb3MuYWRkKCBjb250YWluZXIgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfTtcblxuICAgICQoIHdpbmRvdyApLm9uKCAncmVzaXplLmlsYjcnLCBfc2V0SW1hZ2UgKTtcbiAgICBpZiAoIGhhc0hpc3RvcnlTdXBwb3J0ICYmIG9wdGlvbnMuaGlzdG9yeSApIHtcbiAgICAgICQoIHdpbmRvdyApLm9uKCAncG9wc3RhdGUnLCBfcG9wSGlzdG9yeSApO1xuICAgIH1cblxuICAgICQoIGRvY3VtZW50ICkucmVhZHkoIGZ1bmN0aW9uKCkge1xuXG4gICAgICBpZiAoIG9wdGlvbnMucXVpdE9uRG9jQ2xpY2sgKSB7XG4gICAgICAgICQoIGRvY3VtZW50ICkub24oIGhhc1RvdWNoID8gJ3RvdWNoZW5kLmlsYjcnIDogJ2NsaWNrLmlsYjcnLCBmdW5jdGlvbiggZSApIHtcbiAgICAgICAgICBpZiAoIGltYWdlLmxlbmd0aCAmJiAhICQoIGUudGFyZ2V0ICkuaXMoIGltYWdlICkgKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBfcXVpdEltYWdlTGlnaHRib3goKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoIG9wdGlvbnMuZnVsbHNjcmVlbiAmJiBoYXNGdWxsc2NyZWVuU3VwcG9ydCApIHtcbiAgICAgICAgJCggZG9jdW1lbnQgKS5vbiggJ2tleWRvd24uaWxiNycsIGZ1bmN0aW9uKCBlICkge1xuICAgICAgICAgIGlmICggISBpbWFnZS5sZW5ndGggKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCAtMSA8IFsgOSwgMzIsIDM4LCA0MCBdLmluZGV4T2YoIGUud2hpY2ggKSApIHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICggLTEgPCBbIDEzIF0uaW5kZXhPZiggZS53aGljaCApICkge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIHRvZ2dsZUZ1bGxTY3JlZW4oKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICBpZiAoIG9wdGlvbnMuZW5hYmxlS2V5Ym9hcmQgKSB7XG4gICAgICAgICQoIGRvY3VtZW50ICkub24oICdrZXlkb3duLmlsYjcnLCBmdW5jdGlvbiggZSApIHtcbiAgICAgICAgICBpZiAoICEgaW1hZ2UubGVuZ3RoICkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIGlmICggLTEgPCBbIDI3IF0uaW5kZXhPZiggZS53aGljaCApICYmIG9wdGlvbnMucXVpdE9uRXNjS2V5ICkge1xuICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIF9xdWl0SW1hZ2VMaWdodGJveCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgICBpZiAoIC0xIDwgWyAzNyBdLmluZGV4T2YoIGUud2hpY2ggKSApIHtcbiAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICBfcHJldmlvdXNUYXJnZXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgaWYgKCAtMSA8IFsgMzkgXS5pbmRleE9mKCBlLndoaWNoICkgKSB7XG4gICAgICAgICAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgX25leHRUYXJnZXQoKTtcbiAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgZnVuY3Rpb24gbGF1bmNoSW50b0Z1bGxzY3JlZW4oIGVsZW1lbnQgKSB7XG4gICAgICBpZiAoIGVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4gKSB7XG4gICAgICAgIGVsZW1lbnQucmVxdWVzdEZ1bGxzY3JlZW4oKTtcbiAgICAgIH0gZWxzZSBpZiAoIGVsZW1lbnQubW96UmVxdWVzdEZ1bGxTY3JlZW4gKSB7XG4gICAgICAgIGVsZW1lbnQubW96UmVxdWVzdEZ1bGxTY3JlZW4oKTtcbiAgICAgIH0gZWxzZSBpZiAoIGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4gKSB7XG4gICAgICAgIGVsZW1lbnQud2Via2l0UmVxdWVzdEZ1bGxzY3JlZW4oKTtcbiAgICAgIH0gZWxzZSBpZiAoIGVsZW1lbnQubXNSZXF1ZXN0RnVsbHNjcmVlbiApIHtcbiAgICAgICAgZWxlbWVudC5tc1JlcXVlc3RGdWxsc2NyZWVuKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gZXhpdEZ1bGxzY3JlZW4oKSB7XG4gICAgICBpZiAoIGRvY3VtZW50LmV4aXRGdWxsc2NyZWVuICkge1xuICAgICAgICBkb2N1bWVudC5leGl0RnVsbHNjcmVlbigpO1xuICAgICAgfSBlbHNlIGlmICggZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbiApIHtcbiAgICAgICAgZG9jdW1lbnQubW96Q2FuY2VsRnVsbFNjcmVlbigpO1xuICAgICAgfSBlbHNlIGlmICggZG9jdW1lbnQud2Via2l0RXhpdEZ1bGxzY3JlZW4gKSB7XG4gICAgICAgIGRvY3VtZW50LndlYmtpdEV4aXRGdWxsc2NyZWVuKCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdG9nZ2xlRnVsbFNjcmVlbigpIHtcbiAgICAgIGxhdW5jaEludG9GdWxsc2NyZWVuKCBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCggb3B0aW9ucy5pZCApLnBhcmVudEVsZW1lbnQgKSB8fFxuICAgICAgICBleGl0RnVsbHNjcmVlbigpO1xuICAgIH1cblxuICAgICQoIGRvY3VtZW50ICkub2ZmKCAnY2xpY2snLCBvcHRpb25zLnNlbGVjdG9yICk7XG5cbiAgICBfYWRkVGFyZ2V0cyggJCggdGhpcyApICk7XG5cbiAgICBfb3Blbkhpc3RvcnkoKTtcblxuICAgIF9wcmVsb2FkVmlkZW9zKCk7XG5cbiAgICB0aGlzLmFkZFRvSW1hZ2VMaWdodGJveCA9IGZ1bmN0aW9uKCBlbGVtZW50cyApIHtcbiAgICAgIF9hZGRUYXJnZXRzKCBlbGVtZW50cyApO1xuICAgIH07XG5cbiAgICB0aGlzLm9wZW5IaXN0b3J5ID0gZnVuY3Rpb24oKSB7XG4gICAgICBfb3Blbkhpc3RvcnkoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5sb2FkUHJldmlvdXNJbWFnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgX3ByZXZpb3VzVGFyZ2V0KCk7XG4gICAgfTtcblxuICAgIHRoaXMubG9hZE5leHRJbWFnZSA9IGZ1bmN0aW9uKCkge1xuICAgICAgX25leHRUYXJnZXQoKTtcbiAgICB9O1xuXG4gICAgdGhpcy5xdWl0SW1hZ2VMaWdodGJveCA9IGZ1bmN0aW9uKCkge1xuICAgICAgX3F1aXRJbWFnZUxpZ2h0Ym94KCk7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9O1xuXG4gICAgdGhpcy5zdGFydEltYWdlTGlnaHRib3ggPSBmdW5jdGlvbiggZWxlbWVudCApIHtcbiAgICAgIGlmICggZWxlbWVudCApIHtcbiAgICAgICAgZWxlbWVudC50cmlnZ2VyKCAnY2xpY2suaWxiNycgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgICQoIHRoaXMgKS50cmlnZ2VyKCAnY2xpY2suaWxiNycgKTtcbiAgICAgIH1cbiAgICB9O1xuXG4gICAgcmV0dXJuIHRoaXM7XG4gIH07XG59KSApO1xuIl19
